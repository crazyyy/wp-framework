var BackUpWordPressAdmin=function(e){"use strict";function t(){n=e("select#hmbkp_schedule_recurrence_type"),e.ajaxSetup({cache:!1}),n.length&&(c(n.val()),e(document).on("change","select#hmbkp_schedule_recurrence_type",function(){c(e(this).val())})),e(".notice.is-dismissible").on("click",".notice-dismiss",function(){e.post(ajaxurl,{action:"hmbkp_dismiss_notice"})}),e(document).on("click",".hmbkp-schedule-actions .delete-action",function(e){confirm(hmbkp.delete_schedule)||e.preventDefault()}),e(document).on("click",".hmbkp_manage_backups_row .delete-action",function(e){confirm(hmbkp.delete_backup)||e.preventDefault()}),e(document).on("click",".hmbkp-edit-schedule-excludes-form .delete-action",function(e){confirm(hmbkp.remove_exclude_rule)||e.preventDefault()}),e.post(ajaxurl,{nonce:hmbkp.nonce,action:"hmbkp_cron_test"},function(t){"1"!==t&&e(".wrap > h2").after(t)}),e(document).on("click",".hmbkp-run",function(t){wp.heartbeat.interval("fast"),e(this).closest(".hmbkp-schedule-sentence").addClass("hmbkp-running"),e(".hmbkp-error").removeClass("hmbkp-error");var c=e("[data-hmbkp-schedule-id]").attr("data-hmbkp-schedule-id");e.post(ajaxurl,{hmbkp_run_schedule_nonce:hmbkp.hmbkp_run_schedule_nonce,action:"hmbkp_run_schedule",hmbkp_schedule_id:c}),t.preventDefault()}),e(document).on("heartbeat-send",function(t,c){c.hmbkp_schedule_id=e("[data-hmbkp-schedule-id]").attr("data-hmbkp-schedule-id"),e(".hmbkp-schedule-sentence.hmbkp-running").length?c.hmbkp_is_in_progress=!0:c.hmbkp_client_request="site_size"}),e(document).on("heartbeat-tick",function(t,c){if(0!==c.hmbkp_schedule_status||e(".hmbkp-error").length||location.reload(!0),0!==c.hmbkp_schedule_status&&void 0!==c.hmbkp_schedule_status&&e(".hmbkp-status").replaceWith(c.hmbkp_schedule_status),void 0!==c.hmbkp_site_size&&e("code.calculating").length){e("code.calculating").text(c.hmbkp_site_size);var n=e(".hmbkp-exclude-settings");n.length&&n.replaceWith(c.hmbkp_dir_sizes)}}),e(document).on("click",".hmbkp-thickbox-close",function(e){e.preventDefault(),window.parent.tb_remove()}),e(document).on("click",'[id^="hmbkp-warning-"] .notice-dismiss',function(){e.post(ajaxurl,{action:"hmbkp_dismiss_error"})})}function c(e){e=void 0!==e?e:"manually";var t=jQuery(".recurring-setting"),c=jQuery("#schedule-start"),n=jQuery(".twice-js");switch(e){case"manually":case"hourly":t.hide();break;case"daily":t.hide(),c.show(),n.hide();break;case"twicedaily":t.hide(),c.show(),n.show();break;case"weekly":case"fortnightly":t.hide(),jQuery("#start-day").show(),c.show(),n.hide();break;case"monthly":t.hide(),c.show(),jQuery("#start-date").show(),n.hide()}}var n;return{init:t}}(jQuery);jQuery(document).ready(BackUpWordPressAdmin.init);