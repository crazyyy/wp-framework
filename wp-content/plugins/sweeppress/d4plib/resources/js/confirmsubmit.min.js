!function(i,t){function e(t,e){this.elem=t,this.$elem=i(t),this.options=e,this.metadata=this.$elem.data("confirm-submit")}e.defaults=(e.prototype={defaults:{},init:function(){this.config=i.extend({},this.defaults,this.options,this.metadata),this.save();var e=this;this.$elem.submit(function(){e.save()}),i(t).on("beforeunload",function(t){if(e.$elem.data("form-state-original")!==e.$elem.serialize())return t.preventDefault(),t.returnValue="",!1})},save:function(){this.$elem.data("form-state-original",this.$elem.serialize())}}).defaults,i.fn.confirmsubmit=function(t){return this.each(function(){new e(this,t).init()})}}(jQuery,window,document);