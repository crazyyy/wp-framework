WP_Optimize_Images_View=function(e){function t(e,t,i){var a,o,n,_=e,c=!1;if(t&&e)for(a=y(I).index(y("#"+e)),o=y(I).index(y("#"+t)),-1==a&&(a=o),-1==o&&(o=a),a<o?(n=y(I).eq(a).closest(B),t=y(I).eq(o).attr("id")):(n=y(I).eq(o).closest(B),t=y(I).eq(a).attr("id"));!c;)i?(n.addClass("selected"),y(I,n).prop("checked",i)):(n.removeClass("selected"),y(I,n).prop("checked",i)),y(I,n).attr("id")==t&&(c=!0),n=n.next();else i?y("#"+_).closest(B).addClass("selected"):y("#"+_).closest(B).removeClass("selected");s(0==r().length)}function s(e){C.action_buttons&&y.each(C.action_buttons,function(t,s){s.prop("disabled",e)})}function i(){if(C.hide_when_empty){var e=y([".",C.image_container_class,":visible"].join(""),Q).length;0===e?(0==y(".wpo-images-view-empty",Q).length&&Q.append(y('<div class="wpo-images-view-empty wpo-fieldgroup" />').text(C.no_images_found_message)),y(".wpo-images-view-empty",Q).show()):y(".wpo-images-view-empty",Q).hide(),y.each(C.hide_when_empty,function(t,s){e>0?s.show():s.hide()})}}function a(){p()&&(i(),s(0==r().length))}function o(){Q.scrollTop()+Q.height()+100>Q[0].scrollHeight&&"function"==typeof C.load_next_page_callback&&C.load_next_page_callback()}function n(e,t,s,i,a,o){var n,_="image_"+(65536*(1+Math.random())|0).toString(16).substring(1),c="";if(C.row_action_buttons)for(n in C.row_action_buttons)C.row_action_buttons.hasOwnProperty(n)&&(c+=['<button href="javascript: ;" class="',C.row_action_buttons[n]["class"]?C.row_action_buttons[n]["class"]:"",'"',' title="',C.row_action_buttons[n].hint?C.row_action_buttons[n].hint:"",'">',C.row_action_buttons[n].title?C.row_action_buttons[n].title:"","</button>"].join(""));R.hasOwnProperty(e)||(R[e]=0),R[e]++,Q.append(['\t\t\t<div class="',C.image_container_class," ",C.image_container_custom_classes," ",C.image_container_blog_class_prefix,e,'">\t\t\t\t<a class="button ',C.view_image_btn_link_class,'" href="',s,'" target="_blank">',C.view_image_btn_text,"</a>",'<div class="',C.row_id_class,'">\t\t\t\t\t<input id="',_,'" type="checkbox" class="',C.checkbox_class,'" value="',t,'">\t\t\t\t</div>\t\t\t\t<div class="',C.row_thumb_class,'">\t\t\t\t\t<a href="',s,'" target="_blank">\t\t\t\t\t\t<img class="lazyload" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="',i,'" title="',a,'" alt="',a,'">\t\t\t\t\t</a>\t\t\t\t</div>\t\t\t\t<div class="',C.row_file_class,'">\t\t\t\t\t<a href="',s,'" target="_blank">',o,'</a>\t\t\t\t</div>\t\t\t\t<div class="',C.row_action_class,'">',c,'</div>\t\t\t\t<label for="',_,'" class="',C.label_class,'">\t\t\t\t\t<div class="thumbnail">\t\t\t\t\t\t<img class="lazyload" src="data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-src="',i,'" title="',a,'" alt="',a,'">\t\t\t\t\t</div>\t\t\t\t</label>\t\t\t</div>'].join(""))}function _(e){y(B,Q).hide(),y([".",C.image_container_blog_class_prefix,e].join(""),Q).show(),a()}function c(e){return R.hasOwnProperty(e)?R[e]:0}function l(e){e!==P&&(P=e,e===D.GRID&&Q.removeClass(C.list_mode_class),e===D.LIST&&Q.addClass(C.list_mode_class))}function r(){var e=[];return 0==y('input[type="checkbox"]',Q).length?e:(y([".",C.image_container_class,":visible input:checked"].join(""),Q).each(function(){e.push(y(this).val())}),e)}function d(){var e=[".",C.image_container_class].join("");y([e,":visible input:checked"].join(""),Q).each(function(){y(this).closest(e).remove()})}function u(){Q.show(),y(C.related_elements).each(function(){y(this).show()}),a(),o()}function h(){Q.hide(),y(C.related_elements).each(function(){y(this).hide()})}function p(){return Q.is(":visible")}function m(){g(wpoptimize.loading_data,"",C.loader_additional_html)}function g(e,t,s){t=t?t:"",s=s?s:"",Q.css({"min-height":"220px"}),Q.append(['<div class="wpo_shade">','<div class="wpo_shade_inner">','<span class="dashicons dashicons-update-alt wpo-rotate"></span>',"<h4>",e,"</h4>",'<p class="wpo-shade-progress-message">',t,"</p>",s,"</div>","</div>"].join("")),f()}function w(){Q.css("min-height","initial"),y(".wpo_shade",Q).remove()}function f(){y(".wpo_shade",Q).css("top",Q.scrollTop()+"px")}function b(e){y(".wpo-shade-progress-message",Q).html(e)}function v(){y(".wpo_unused_image__input",Q).prop("checked",!0).trigger("change")}function A(){y(".wpo_unused_image__input",Q).prop("checked",!1).trigger("change")}function k(){y([".",C.image_container_class].join(""),Q).remove(),R={},s(!0),"function"==typeof C.onclear&&C.onclear()}function x(){k(),o()}var y=jQuery,j={container:"",image_container_class:"wpo_unused_image",image_container_custom_classes:"wpo_unused_image_row",image_container_blog_class_prefix:"wpo_unused_image_site_",view_image_btn_link_class:"wpo_unused_image_view_link",view_image_btn_text:wpoptimize.view_image_link_text,row_selector:".wpo_unused_image_row",row_id_class:"wpo_unused_images_row_id",row_thumb_class:"wpo_unused_images_row_thumb",row_file_class:"wpo_unused_images_row_file",row_action_class:"wpo_unused_images_row_action",row_action_buttons:[],label_class:"wpo_unused_image_thumb_label",loader_additional_html:"",action_btn_text:"Remove",action_btn_class:"button button-primary wpo_unused_images_remove_single",checkbox_class:"wpo_unused_image__input",list_mode_class:"wpo_unused_image_list_view",no_images_found_message:"No images found",related_elements:[],action_buttons:[],hide_when_empty:[],load_next_page_callback:null,onclear:null},C=jQuery.extend({},j,e),D={GRID:"grid",LIST:"list"},P=D.GRID,Q=C.container,B="."+C.image_container_class,I="."+C.checkbox_class,O="",R={};Q.on("scroll mousewheel",function(){o(),f()});var z=!1;return Q.on("mousedown",C.row_selector,function(e){z=e.shiftKey||e.ctrlKey}),Q.on("mouseup",C.row_selector,function(e){z=e.shiftKey||e.ctrlKey}),Q.on("change","."+C.checkbox_class,function(e){!0===y(this).prop("checked")?y(this).closest(B).addClass("selected"):y(this).closest(B).removeClass("selected");var s=y(this).attr("id");""===O||0===y("#"+O).length||!1===z?t(s,null,!0===y(this).prop("checked")):z?1===r().length?t("",s,!0===y(this).prop("checked")):t(O,s,!0===y(this).prop("checked")):t(s,null,!0===y(this).prop("checked")),O=s}),{show:u,hide:h,clear:k,reload:x,show_loader:m,show_custom_loader:g,hide_loader:w,loader_message:b,append_image:n,get_selected_images:r,remove_selected_images:d,get_images_count:c,load_next_page_if_need:o,filter_by_site:_,switch_view_mode:l,select_all:v,select_none:A,is_visible:p,update_view:a}};