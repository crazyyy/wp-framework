!function(t){function e(e){var n=t(e).serializeArray().reduce(i,{});return t(e).find('input[type="checkbox"]').each(function(e){var i=t(this).prop("name");if(i.includes("[]")){if(!t(this).is(":checked"))return;var s=i.replace("[]","");n[s]||(n[s]=[]),n[s].push(t(this).val())}else n[i]=t(this).is(":checked")?"true":"false"}),n}function i(t,e){return e.name.includes("[]")?t:(t[e.name]=e.value,t)}var n=window.wp_optimize||{},s=n.block_ui,a=n.send_command,o=wpoptimize.refresh_frequency||3e4,c=WP_Optimize_Heartbeat(),p=[];if(!a)return void console.error("WP-Optimize Minify: wp_optimize.send_command is required.");var l={};l.init=function(){function i(){t("#wp-optimize-nav-tab-wpo_minify-font-contents .google_fonts_option").prop("disabled",y.is(":checked"))}function o(t){return t.data("url")}function l(e){var i=t("#exclude_js"),n=i.val();n+=e+"\n",i.val(n)}function r(e){var i=t("#exclude_css"),n=i.val();n+=e+"\n",i.val(n)}function d(e){var i=e.data("url"),n=t("#async_js"),s=n.val();s+=i+"\n",n.val(s),_("js"),m(e)}function f(e){var i=e.data("url"),n=t("#async_css"),s=n.val();s+=i+"\n",n.val(s),_("css"),m(e)}function _(e){t("#wp-optimize-nav-tab-wpo_minify-"+e+"-contents form").data("need_saving",!0)}function m(e){e.closest(".wpo_min_log").prev().removeClass("hidden").addClass("updated").slideDown(),e.text(wpoptimize.added_to_list),e.removeClass("exclude"),e.parent().addClass("disable-list-item"),e.replaceWith(t("<span>"+e.text()+"</span>"))}function u(e){t('input[name="enable_defer_js"]').each(function(e,i){t(i).closest("fieldset").removeClass("selected").find(".defer-js-settings").slideUp("fast")}),t('input[name="enable_defer_js"]:checked').closest("fieldset").addClass("selected").find(".defer-js-settings").slideDown("fast")}function h(){var t=c.add_agent({command:"get_minify_preload_status",callback:w,_keep:!1});null!==t&&p.push(t)}function w(t){t.done?(b.val(wpoptimize.run_now),b.data("running",!1)):(b.val(wpoptimize.cancel),b.data("running",!0),h()),z.text(t.message),g(t)}function g(e){t("#wpo_min_cache_size").text(e.size),t("#wpo_min_cache_total_size").text(e.total_size)}var v=this;this.enabled=!1,t(document).on("wp-optimize/minify/toggle-status",function(e,i){i.hasOwnProperty("enabled")&&(t('[data-whichpage="wpo_minify"]').toggleClass("is-enabled",i.enabled),v.enabled=i.enabled,v.enabled&&v.getFiles())}),t(".purge_minify_cache").on("click",function(e){e.preventDefault(),s(wpoptimize.clearing_cache),a("purge_minify_cache",null,function(t){t.hasOwnProperty("files")&&(v.updateFilesLists(t.files),v.updateStats(t.files))}).always(function(){t.unblockUI()})}),t(".purge_all_minify_cache").on("click",function(){s(wpoptimize.clearing_cache),a("purge_all_minify_cache",null,function(t){t.hasOwnProperty("files")&&(v.updateFilesLists(t.files),v.updateStats(t.files))}).always(function(){t.unblockUI()})}),t(".minify_increment_cache").on("click",function(){s(wpoptimize.creating_cache),a("minify_increment_cache",null,function(t){t.hasOwnProperty("files")&&(v.updateFilesLists(t.files),v.updateStats(t.files))}).always(function(){t.unblockUI()})}),t("#wp-optimize-nav-tab-wpo_minify-status-contents form :input, #wp-optimize-nav-tab-wpo_minify-js-contents form :input, #wp-optimize-nav-tab-wpo_minify-css-contents form :input, #wp-optimize-nav-tab-wpo_minify-font-contents form :input, #wp-optimize-nav-tab-wpo_minify-analytics-contents form :input, #wp-optimize-nav-tab-wpo_minify-settings-contents form :input, #wp-optimize-nav-tab-wpo_minify-advanced-contents form :input").on("change",function(){t(this).closest("form").data("need_saving",!0)}),t("input[type=checkbox].wpo-save-setting").on("change",function(e){var i=t(this),n=i.prop("checked"),o=i.prop("name"),c={};c[o]=n,s(wpoptimize.saving),a("save_minify_settings",c,function(t){t.success?(i.trigger("wp-optimize/minify/saved_setting"),t.hasOwnProperty("files")&&(v.updateFilesLists(t.files),v.updateStats(t.files))):console.log("Settings not saved",c)}).always(function(){t.unblockUI()})}),t("#wpo_min_enable_minify").on("wp-optimize/minify/saved_setting",function(){this.enabled=t(this).prop("checked"),t(document).trigger("wp-optimize/minify/toggle-status",{enabled:this.enabled})}),t("#wpo_min_enable_minify").on("wp-optimize/minify/saved_setting",function(){t(this).closest(".wpo_section").toggleClass("wpo-feature-is-disabled",!t(this).is(":checked"))}),t("#wpo_min_enable_minify_css, #wpo_min_enable_minify_js").on("wp-optimize/minify/saved_setting",function(){t('#wp-optimize-nav-tab-wrapper__wpo_minify a[data-tab="'+t(this).data("tabname")+'"] span.disabled').toggleClass("hidden",t(this).is(":checked")),t("#wpo_section_"+t(this).data("tabname")).toggleClass("wpo-disabled-section",t(this).is(":not(:checked)"))}).each(function(){t('#wp-optimize-nav-tab-wrapper__wpo_minify a[data-tab="'+t(this).data("tabname")+'"] span.disabled').toggleClass("hidden",t(this).is(":checked")),t("#wpo_section_"+t(this).data("tabname")).toggleClass("wpo-disabled-section",t(this).is(":not(:checked)"))}),t("#wpo_min_enable_minify_debug").on("wp-optimize/minify/saved_setting",function(){s(wpoptimize.page_refresh),location.href=t("#wp-optimize-nav-tab-wpo_minify-advanced").prop("href")}),t("#wpo_min_edit_default_exclutions").on("wp-optimize/minify/saved_setting",function(){t(".wpo-minify-default-exclusions").toggleClass("hidden",!t(this).prop("checked"))});var y=t("#disable_google_fonts_processing");y.on("change",i),i(),t(".wp-optimize-save-minify-settings").on("click",function(i){i.preventDefault();var o=t(this),c=o.next(),p=c.next();c.show(),s(wpoptimize.saving);var l={},r=t('[data-whichpage="wpo_minify"] .wp-optimize-nav-tab-contents form');r.each(function(){var i=t(this);!0===i.data("need_saving")&&(l=Object.assign(l,e(i)),i.data("need_saving",!1))}),a("save_minify_settings",l,function(e){e.hasOwnProperty("error")?(console.log(e.error),n.notices.show_notice(e.success,e.error)):t(".wpo-error__enabling-cache").addClass("wpo_hidden").find("p").text(""),e.hasOwnProperty("files")&&(v.updateFilesLists(e.files),v.updateStats(e.files)),c.hide(),p.show(),setTimeout(function(){p.fadeOut("slow",function(){p.hide()})},5e3)}).always(function(){t.unblockUI()})}),t(".wp-optimize-minify-status-information-notice").on("click",".notice-dismiss",function(t){t.preventDefault(),a("hide_minify_notice")}),t("#wpo_min_jsprocessed, #wpo_min_cssprocessed").on("click",".log",function(e){e.preventDefault(),t(this).nextAll(".wpo_min_log").slideToggle("fast");var i=t(this).text().trim();wpoptimize.show_information===i?t(this).text(wpoptimize.hide_information):t(this).text(wpoptimize.show_information)}),t("#wpo_min_jsprocessed, #wpo_min_cssprocessed").on("click",".delete-file",function(e){e.preventDefault();var i=t(this).data("filename");return""===i||void 0===i?(alert(wpoptimize.cache_file_not_found),!1):(s(wpoptimize.deleting),void a("delete_minify_cache_file",i,function(t){""!==t.files&&(v.updateFilesLists(t.files),v.updateStats(t.files)),""!==t.result&&alert(t.result),""!==t.error&&alert(t.error)}).always(function(){t.unblockUI()}))}),t("#wpo_min_jsprocessed").on("click",".exclude",function(e){e.preventDefault();var i=t(this),n=o(i);l(n),_("js"),m(i)}),t("#wpo_min_cssprocessed").on("click",".exclude",function(e){e.preventDefault();var i=t(this),n=o(i);r(n),_("css"),m(i)}),t(".wpo-minify-download-metas-button").on("click",function(t){t.preventDefault(),a("get_minify_meta_files",null,function(t){if(t.hasOwnProperty("error"))return void alert(t.error);var e=document.body.appendChild(document.createElement("a"));e.setAttribute("download","combined_metas.json"),e.setAttribute("style","display:none;"),e.setAttribute("href","data:text/json;charset=UTF-8,"+encodeURIComponent(JSON.stringify(t.combined_metas))),e.click()})}),t("#wpo_min_jsprocessed").on("click",".defer",function(e){e.preventDefault(),d(t(this))}),t("#wpo_min_cssprocessed").on("click",".async",function(e){e.preventDefault(),f(t(this))}),t("#wp-optimize-minify-advanced").on("click",".save-exclusions",function(e){e.preventDefault(),t(".wp-optimize-save-minify-settings").first().trigger("click")}),this.enabled=t("#wpo_min_enable_minify").prop("checked"),t(document).trigger("wp-optimize/minify/toggle-status",{enabled:this.enabled}),this.enabled||t('#wp-optimize-nav-tab-wrapper__wpo_minify a[data-tab="status"]').is(".nav-tab-active")||t('#wp-optimize-nav-tab-wrapper__wpo_minify a[data-tab="status"]').trigger("click"),t('input[name="enable_defer_js"]').on("change",u),u();var b=t("#wp_optimize_run_minify_preload"),z=t("#wp_optimize_preload_minify_status");b.on("click",function(){var e=t(this),i=e.data("running"),n=z.text();e.prop("disabled",!0),i?(e.data("running",!1),c.cancel_agents(p),a("cancel_minify_preload",null,function(t){t&&t.hasOwnProperty("message")&&z.text(t.message)}).always(function(){e.val(wpoptimize.run_now),e.prop("disabled",!1)})):(z.text(wpoptimize.starting_preload),e.data("running",!0),a("run_minify_preload",null,null,!0,{timeout:3e3}).always(function(t){try{var i=wpo_parse_json(t)}catch(s){}if(i&&i.error){var a=wpoptimize.error_unexpected_response;return"function"!=typeof i.error?a=i.error:i.status&&(a=i.status+": "+i.statusText),alert(a),z.text(n),e.prop("disabled",!1),void e.data("running",!1)}z.text(wpoptimize.loading_urls),e.val(wpoptimize.cancel),e.prop("disabled",!1),h()}))}),b.data("running")&&h();var k=t("#wpo-analytics-hidden-content");return t("#wpo_enable_analytics").on("change",function(){k.css("display",t(this).prop("checked")?"block":"none")}),this},l.getFiles=function(){if(this.enabled){var t={stamp:(new Date).getTime()};a("get_minify_cached_files",t,function(t){l.updateFilesLists(t),l.updateStats(t)}),o&&setTimeout(l.getFiles.bind(this),o)}},l.updateFilesLists=function(e){if(null!==e){var i=[];e.js.length>0&&t(e.js).each(function(){i.push(this.uid),0==t("#"+this.uid).length&&t("#wpo_min_jsprocessed ul.processed").append('\t\t\t\t\t<li id="'+this.uid+'">\t\t\t\t\t\t<span class="filename"><a href="'+this.file_url+'" target="_blank">'+this.filename+"</a> ("+this.fsize+')</span>\t\t\t\t\t\t<a href="#" class="log">'+wpoptimize.show_information+'</a>\t\t\t\t\t\t<a href="#" class="delete-file" data-filename="'+this.filename+'">'+wpoptimize.delete_file+'</a>\t\t\t\t\t\t<div class="hidden save_notice">\t\t\t\t\t\t\t<p>'+wpoptimize.added_notice+'</p>\t\t\t\t\t\t\t<p><button class="button button-primary save-exclusions">'+wpoptimize.save_notice+'</button></p>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="hidden wpo_min_log">'+this.log+"</div>\t\t\t\t\t</li>\t\t\t\t")}),t("#wpo_min_jsprocessed ul.processed .no-files-yet").toggle(!e.js.length),e.css.length>0&&t(e.css).each(function(){i.push(this.uid),0==t("#"+this.uid).length&&t("#wpo_min_cssprocessed ul.processed").append('\t\t\t\t\t<li id="'+this.uid+'">\t\t\t\t\t\t<span class="filename"><a href="'+this.file_url+'" target="_blank">'+this.filename+"</a> ("+this.fsize+')</span>\t\t\t\t\t\t<a href="#" class="log">'+wpoptimize.show_information+'</a>\t\t\t\t\t\t<a href="#" class="delete-file" data-filename="'+this.filename+'">'+wpoptimize.delete_file+'</a>\t\t\t\t\t\t<div class="hidden save_notice">\t\t\t\t\t\t\t<p>'+wpoptimize.added_to_list+'</p>\t\t\t\t\t\t\t<p><button class="button button-primary save-exclusions">'+wpoptimize.save_notice+'</button></p>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="hidden wpo_min_log">'+this.log+"</div>\t\t\t\t\t</li>\t\t\t\t")}),t("#wpo_min_cssprocessed ul.processed .no-files-yet").toggle(!e.css.length),t("#wpo_min_jsprocessed ul.processed > li, #wpo_min_cssprocessed ul.processed > li").each(function(){-1==jQuery.inArray(t(this).attr("id"),i)&&(t(this).is(".no-files-yet")||t(this).remove())})}},l.updateStats=function(e){e.cachesize.length>0&&(t("#wpo_min_cache_size").html(this.enabled?e.cachesize:wpoptimize.no_minified_assets),t("#wpo_min_cache_total_size").html(this.enabled?e.total_cache_size:wpoptimize.no_minified_assets),t("#wpo_min_cache_time").html(this.enabled?e.cacheTime:"-"),t("#wpo_min_cache_path").html(e.cachePath))},n.minify_settings=function(){var i=t('[data-whichpage="wpo_minify"] .wp-optimize-nav-tab-contents form'),n={};return i.each(function(){var i=t(this);n=Object.assign(n,e(i))}),n},n.minify=l}(jQuery);