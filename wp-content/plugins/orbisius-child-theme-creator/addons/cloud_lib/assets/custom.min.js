jQuery(document).ready(function(t){function e(e){t.ajax({type:"post",url:ajaxurl,data:{action:"orb_ctc_addon_cloud_lib_search",search:e},success:function(e){e.status&&e.data.length>0&&t.map(e.data,function(e){"[]"!=e&&(t(".found_snippet").show(),t("#found_snippet_text").val(e.content).focus(),t("#found_snippet_title").val(e.title).focus())})}})}function i(){return t("#manage_snippets_table .snippet_row").length-1}function n(e){t(".snippet_row_"+e).remove(),t("#manage_snippets_table .snippet_row:visible").length<=0?t("#no_snippets_row").show():t("#no_snippets_row").hide(),t.ajax({url:ajaxurl,data:{id:e,action:"orb_ctc_addon_cloud_lib_delete"},success:function(e){t(".usage_items").text(i()),e.status||alert(e.msg)}})}function o(e,n,o){e=(e=parseInt(e))||0;var s="",a=t(".new_snippet_wrapper").find(".result");a.html("Please, wait ..."),e<=0?(t("#no_snippets_row").hide(),(s=t("#manage_snippets_table .snippet_row:first").clone()).show(),t("#manage_snippets_table").prepend(s),t(".usage_items").text(i())):s=t(".snippet_row_"+e);var l=t(".new_snippet_wrapper").find(":submit");l.hide(),s.find(".snippet_title").html("Please, wait..."),s.find(".snippet_content").empty().hide(),t.ajax({url:ajaxurl,data:{id:e,title:n,text:o,action:"orb_ctc_addon_cloud_lib_cloud_update"},success:function(e){a.html(e.msg),l.show(),e.status&&(s.data("id",e.data.id),s.prop("id",e.data.id),s.find(".snippet_title").html(n),s.removeClass("snippet_row_0"),s.addClass("snippet_row_"+e.data.id),s.find(".snippet_content").html(o),s.find(".snippet_content").show(),setTimeout(function(){a.empty(),t(".orb_ctc_ext_cloud_lib_add_new_snippet_form").trigger("reset"),t(".orb_ctc_ext_cloud_lib_add_new_snippet_form .add_snippet_text").focus()},2500))}})}t(".orb_ctc_ext_cloud_lib_account_log_out").on("click",function(e){e.preventDefault();var i={},n=t(".orb_ctc_ext_cloud_lib_account").find(".result");n.html("Please, wait ..."),t.ajax({type:"post",url:ajaxurl+"?action=orb_ctc_addon_cloud_lib_log_out",data:i,success:function(t){t.status?(n.html("Please, wait"),window.location.reload()):n.html(t.msg)}})}),t(".orb_ctc_signup_form").on("submit",function(e){e.preventDefault();var i=t(this).serialize();if(t(".orb_ctc_pass").val()!=t(".orb_ctc_pass2").val())return alert("Error: Passwords do not match"),!1;var n=t(this).find(":submit"),o=t(".orb_ctc_ext_cloud_lib_signup_wrapper").find(".result");return o.html("Please, wait"),n.hide(),t.ajax({type:"post",url:ajaxurl+"?action=orb_ctc_addon_cloud_lib_signup",data:i,success:function(t){if(t.status)o.html("Please, wait"),window.location.reload();else{var e=t.msg||"There was an error with the registration. Contact us and report if you think this is a glitch.";o.html(e),n.show()}}}),!1}),t(".orb_ctc_ext_cloud_lib_edit_snippet_form").on("submit",function(e){return e.preventDefault(),o(t(".edit_id").val().trim()||0,t(".edit_title").val().trim(),t(".edit_content").val().trim()),!1}),t(".orb_ctc_login_form").on("submit",function(e){e.preventDefault();var i=t(this).serialize(),n=t(this).find(":submit"),o=t(".orb_ctc_ext_cloud_lib_login_wrapper").find(".result");return o.html("Please, wait"),n.hide(),t.ajax({type:"post",url:ajaxurl+"?action=orb_ctc_addon_cloud_lib_login",data:i,success:function(t){if(t.status)o.html("Please, wait"),window.location.reload();else{var e=t.msg||"Login details are incorrect.";o.html(e),n.show()}}}),!1}),t("#search_text").autocomplete({minLength:3,open:function(){t(this).removeClass("ui-corner-all").addClass("ui-corner-top")},close:function(){t(this).removeClass("ui-corner-top").addClass("ui-corner-all")},source:function(e,i){t.ajax({type:"post",url:ajaxurl,data:{action:"orb_ctc_addon_cloud_lib_autocomplete",term:e.term},success:function(e){i(t.map(e.data,function(t){return{value:t.id,label:t.title}}))},select:function(t,e){}})}}),t("#snippet_search_btn").on("click",function(){var i=t("#search_text").val().trim();""!==i?e(i):t("#search_text").focus()}),t("#search_text").keypress(function(i){if(13==i.keyCode||13==i.which){var n=t("#search_text").val().trim();""!==n?e(n):t("#search_text").focus()}}),t("#search_text").on("autocompleteselect",function(i,n){var o=n.item.label;""!==o?e(o):t("#search_text").focus()}),t("#new_snippet_btn").on("click",function(){t(".new_snippet_wrapper").show("slow")}),t("#add_snippet_title").on("keypress",function(e){return 13!=e.keyCode&&13!=e.which||(e.preventDefault(),t("#snippet_save_btn").trigger("click"),!1)}),t(document).on("keydown",".add_snippet_text",function(e){return!e.ctrlKey||13!=e.keyCode&&13!=e.which||(e.preventDefault(),t("#snippet_save_btn").trigger("click"),!1)}),t(document).on("keydown",".edit_title",function(e){return!!(e.ctrlKey||13!=e.keyCode&&13!=e.which)||(t(".edit_content").focus(),!1)}),t(document).on("keydown",".edit_title,.edit_content",function(e){return!e.ctrlKey||13!=e.keyCode&&13!=e.which||(e.preventDefault(),t("#edit_snippet").dialog("close"),t(".orb_ctc_ext_cloud_lib_edit_snippet_form").trigger("submit"),!1)}),t(".orb_ctc_ext_cloud_lib_add_new_snippet_form").on("submit",function(t){return t.preventDefault(),!1}),t("#snippet_save_btn").on("click",function(e){o(0,t("#add_snippet_title").val().trim(),t("#add_snippet_text").val().trim())}),t("#manage_snippets_table").on("click",".snippet_delete_btn",function(){var e=t(this).closest("tr").data("id"),i=t(this).closest("tr").children("td.title_cell").children(".snippet_title").text();t(".delete_snippet_title").text(i),t("#snippet_confirm_dialog_delete").dialog({dialogClass:"snippet_confirm_dialog_delete",modal:!0,resizable:!1,draggable:!1,buttons:[{text:"Yes",class:"button-primary",click:function(){t(this).dialog("close"),n(e)}},{text:"No",class:"button",click:function(){t(this).dialog("close")}}],close:function(e,i){t(".snippet_delete_btn").blur()}})}),t("#manage_snippets_table").on("click",".snippet_edit_view_btn",function(){var e=t(this).closest(".snippet_row"),i=t(e).data("id")||0,n=t(e).find(".snippet_title").html().trim(),o=t(e).find(".snippet_content").html().trim();n=t("<textarea/>").html(n).val(),o=t("<textarea/>").html(o).val(),t(".edit_id").val(i),t(".edit_title").val(n),t(".edit_content").val(o);t("#edit_snippet").dialog({dialogClass:"edit_snippet",modal:!0,autoOpen:!0,show:!1,width:"auto",resizable:!0,minWidth:300,minHeight:300,position:{my:"center",at:"center",of:window},buttons:[{text:"Save Changes",class:"button-primary",click:function(){t(".orb_ctc_ext_cloud_lib_edit_snippet_form").trigger("submit"),t(this).dialog("close")}},{text:"Close",class:"button",click:function(){t(this).dialog("close")}}],close:function(e,i){t(".snippet_edit_view_btn").blur()}})}),t(".snippet_view_btn").on("click",function(){var e=t(this).parents("tr").children("td.title_cell").children(".snippet_title").text(),i=t(this).parents("tr").children("td.title_cell").children(".snippet_content").text();t(".view_title").val(e),t(".view_content").val(i),t("#view_snippet").dialog({dialogClass:"view_snippet",modal:!0,resizable:!1,buttons:[{text:"Copy",class:"button-primary",click:function(){t(this).dialog("close")}},{text:"Close",class:"button",click:function(){t(this).dialog("close")}}],close:function(t,e){}})}),t(".orb_ctc_addon_cloud_lib_tabs").tabs({heightStyle:"auto",activate:function(e,i){"#orb_ctc_ext_cloud_lib_add"==i.newPanel.selector?""==t("#add_snippet_title").val().trim()?t("#add_snippet_title").focus():t("#add_snippet_text").focus():"#orb_ctc_ext_cloud_lib_signup"==i.newPanel.selector?""==t("#orb_ctc_email").val()?t("#orb_ctc_email").focus():t("#orb_ctc_pass2").focus():"#orb_ctc_ext_cloud_lib_login"==i.newPanel.selector&&(""==t("#orb_ctc_login_email").val()?t("#orb_ctc_login_email").focus():t("#orb_ctc_login_pass").focus())}}).css({"min-height":"250px",overflow:"auto"}),t(".usage_items").text(i())});