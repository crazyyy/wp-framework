!function(){"use strict";var e={n:function(n){var a=n&&n.__esModule?function(){return n.default}:function(){return n};return e.d(a,{a:a}),a},d:function(n,a){for(var t in a)e.o(a,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:a[t]})},o:function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}},n=jQuery,a=e.n(n),t=wp.i18n;function o(e,n){for(var a=0;a<n.length;a++){var t=n[a];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}var r=function(){function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.deactivatePlugins(),this.updateModules(),this.initializeClipBoard(),this.modeSelector(),this.dashboardWidget()}var n,r,i;return n=e,(r=[{key:"deactivatePlugins",value:function(){a()(".dashboard-deactivate-plugin").on("click",(function(e){e.preventDefault();var n=a()(this);return a().ajax({url:window.ajaxurl,type:"POST",data:{action:"rank_math_deactivate_plugins",security:rankMath.security,plugin:"all"}}).always((function(e){"1"===e&&n.parents(".rank-math-notice").remove()})),!1}))}},{key:"updateModules",value:function(){a()(".rank-math-modules").on("change",(function(){var e=a()(this),n=e.closest(".rank-math-box"),t=e.is(":checked"),o=e.val();n.addClass("saving"),a().ajax({url:rankMath.api.root+"rankmath/v1/saveModule",method:"POST",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",rankMath.api.nonce)},data:{module:o,state:t?"on":"off"}}).done((function(e){e?(n.removeClass("saving"),n.toggleClass("active",t),a().ajax({url:window.location.pathname+window.location.search,method:"GET"}).done((function(e){if(e){var n=a()(e).find("#toplevel_page_rank-math"),t=a()("#toplevel_page_rank-math > .wp-submenu");n.length&&n.find("> .wp-submenu > li").length!==t.children("li").length&&t.fadeOut(200,(function(){t.html(n.find("> .wp-submenu").hide().children()).fadeIn(400)}))}}))):window.alert("Something went wrong! Please try again.")}))}))}},{key:"initializeClipBoard",value:function(){"undefined"!=typeof ClipboardJS&&(a()(".get-debug-report").on("click",(function(){return a()("#debug-report").slideDown(),a()("#debug-report textarea").focus().select(),a()(this).parent().fadeOut(),!1})),new ClipboardJS("#copy-for-support"))}},{key:"modeSelector",value:function(){a()(".rank-math-mode-selector a").on("click",(function(e){e.preventDefault();var n=a()(this).data("mode");return a().ajax({url:rankMath.api.root+"rankmath/v1/updateMode",method:"POST",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",rankMath.api.nonce)},data:{mode:n}}).done((function(e){e?window.location.reload():window.alert("Something went wrong! Please try again.")})),!1}))}},{key:"dashboardWidget",value:function(){var e=a()("#rank-math-dashboard-widget");e.length&&a().ajax({url:rankMath.api.root+"rankmath/v1/dashboardWidget",method:"GET",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",rankMath.api.nonce)}}).done((function(n){n?e.removeClass("rank-math-loading").html(n):e.removeClass("rank-math-loading").html((0,t.__)("Something went wrong! Please try again.","rank-math"))}))}}])&&o(n.prototype,r),i&&o(n,i),Object.defineProperty(n,"prototype",{writable:!1}),e}();a()((function(){new r}))}();