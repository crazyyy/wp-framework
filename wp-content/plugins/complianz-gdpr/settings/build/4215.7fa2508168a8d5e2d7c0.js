"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[4215,4976,4992,9296,2540,4924],{24976:(e,t,n)=>{n.r(t),n.d(t,{UseMenuData:()=>r});var l=n(30809),a=n(61744),i=n(524),s=n(32208),c=n(93396);const r=(0,l.Su)(((e,t)=>({menuDataLoaded:!1,saving:!1,menu:[],menuChanged:!1,changedMenuType:"per_document",emptyMenuLink:"#",requiredDocuments:[],createdDocuments:[],genericDocuments:[],documentsNotInMenu:[],pageTypes:[],regions:[],fetchMenuData:async()=>{const t=await o(!1);let n=t.required_documents.filter((e=>e.page_id));e({menuDataLoaded:!0,emptyMenuLink:t.empty_menu_link,menu:t.menu,requiredDocuments:t.required_documents,genericDocuments:t.generic_documents_list,createdDocuments:n,pageTypes:t.page_types,documentsNotInMenu:t.documents_not_in_menu,regions:t.regions})},updateMenu:(t,n)=>{let l=isNaN(t)?"per_type":"per_document";e({menuType:l}),e("per_type"===l?(0,i.cp)((e=>{let l=e.genericDocuments.findIndex((function(e,n){return e.page_id===t||e.type===t})),a=e.createdDocuments.findIndex((function(e,n){return e.page_id===t||e.type===t}));-1!==l&&(e.genericDocuments[l].menu_id=n,-1!==a&&(e.createdDocuments[a].menu_id=-1),e.menuChanged=!0)})):(0,i.cp)((e=>{let l=e.genericDocuments.findIndex((function(e,n){return e.page_id===t||e.type===t})),a=e.createdDocuments.findIndex((function(e,n){return e.page_id===t||e.type===t}));-1!==a&&(e.createdDocuments[a].menu_id=n,-1!==l&&(e.genericDocuments[l].menu_id=-1),e.menuChanged=!0)})))},saveDocumentsMenu:async(n,l)=>{if(e({saving:!0}),t().menuChanged||n){let n={};n.genericDocuments=t().genericDocuments.filter((e=>e.can_region_redirect)),n.createdDocuments=t().createdDocuments;const i=a.doAction("save_documents_menu_data",n).then((t=>(e({saving:!1}),t))).catch((e=>{console.error(e)}));l&&s.toast.promise(i,{pending:(0,c.__)("Saving menu...","complianz-gdpr"),success:(0,c.__)("Menu saved","complianz-gdpr"),error:(0,c.__)("Something went wrong","complianz-gdpr")})}else l&&s.toast.info((0,c.__)("Settings have not been changed","complianz-gdpr"))}}))),o=()=>a.doAction("documents_menu_data",{generate:!1}).then((e=>e)).catch((e=>{console.error(e)}))},44992:(e,t,n)=>{n.r(t),n.d(t,{default:()=>r});var l=n(51280),a=n(15832),i=n(93396),s=n(24300),c=n.n(s);const r=e=>{let t=e.help;t.title||(t.title=t.text,t.text=!1);let n=e.noticesExpanded?"open":"",s=t.url&&-1!==t.url.indexOf("complianz.io")?"_blank":"_self";return(0,l.createElement)(l.Fragment,null,t.title&&t.text&&(0,l.createElement)("details",{className:"cmplz-wizard-help-notice cmplz-"+t.label.toLowerCase(),open:n},(0,l.createElement)("summary",null,t.title," ",(0,l.createElement)(a.default,{name:"chevron-down"})),(0,l.createElement)("div",{dangerouslySetInnerHTML:{__html:c().sanitize(t.text)}})," ",t.url&&(0,l.createElement)("div",{className:"cmplz-help-more-info"},(0,l.createElement)("a",{target:s,href:t.url},(0,i.__)("More info","complianz-gdpr")))),t.title&&!t.text&&(0,l.createElement)("div",{className:"cmplz-wizard-help-notice cmplz-"+t.label.toLowerCase()},(0,l.createElement)("p",null,t.title)))}},59296:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});var l=n(30809),a=n(61744);const i=(0,l.Su)(((e,t)=>({licenseStatus:cmplz_settings.licenseStatus,processing:!1,licenseNotices:[],noticesLoaded:!1,getLicenseNotices:async()=>{const{licenseStatus:t,notices:n}=await a.doAction("license_notices",{}).then((e=>e));e((e=>({noticesLoaded:!0,licenseNotices:n,licenseStatus:t})))},activateLicense:async t=>{let n={};n.license=t,e({processing:!0});const{licenseStatus:l,notices:i}=await a.doAction("activate_license",n);e((e=>({processing:!1,licenseNotices:i,licenseStatus:l})))},deactivateLicense:async()=>{e({processing:!0});const{licenseStatus:t,notices:n}=await a.doAction("deactivate_license");e((e=>({processing:!1,licenseNotices:n,licenseStatus:t})))}})))},54215:(e,t,n)=>{n.r(t),n.d(t,{ScrollProgress:()=>h,default:()=>_});var l=n(51280),a=n(44924),i=n(62540),s=n(44992),c=n(88496),r=n(93396),o=n(25536),m=n(38924),d=n(24976),u=n(76300),p=n(64224),g=n(55664),f=n(94880);const _=()=>{const[e,t]=(0,c.useState)(!0),{progressLoaded:_,notices:z,fetchProgressData:E}=(0,p.default)(),[v,b]=(0,c.useState)(!1),{saveBanner:y,setBannerDataLoaded:N}=(0,u.default)(),{saveDocumentsMenu:k}=(0,d.UseMenuData)(),[w,D]=(0,c.useState)(null),[L,S]=(0,c.useState)(null),[x,M]=(0,c.useState)(!1),{saving:C,fieldNotices:I,fieldNoticesLoaded:T,fieldsLoaded:F,saveFields:A,changedFields:P,fields:B,fetchAllFieldsCompleted:H,nextButtonDisabled:q,isNextButtonDisabled:$}=(0,o.default)(),{subMenuLoaded:U,saveButtonsRequired:O,subMenu:R,selectedSubMenuItem:G,selectedMainMenuItem:V,nextMenuItem:Y,previousMenuItem:j}=(0,m.default)();(0,c.useEffect)((()=>{"banner"!==V||w||n.e(7812).then(n.bind(n,27812)).then((({default:e})=>{D((()=>e))}))}),[V]),(0,c.useEffect)((()=>{"finish"!==G||L||Promise.all([n.e(3932),n.e(6180)]).then(n.bind(n,56180)).then((({default:e})=>{S((()=>e))}))}),[G]),(0,c.useEffect)((()=>{"#banner"!==window.location.hash&&H()}),[P]),(0,c.useEffect)((()=>{let e=!1;return q?e=setInterval((()=>{$(B,G)}),3e3):e&&clearInterval(e),()=>clearInterval(e)}),[q]);const J=async(e,t)=>{-1!==P.findIndex((e=>"regions"===e.id))&&N(!1),"document-menu"===G?(await A(G,t,!1),await k(P.length>0,t)):"banner"===V?await y(B):await A(G,t,e)},{menu_items:K}=R;if(!U||!F||0===K.length)return(0,l.createElement)(g.default,null);let Q=B.filter((e=>e.menu_id===G)),W=[];for(const e of Q)(0,a.in_array)(e.group_id,W)||W.push(e.group_id);let X=[];if(T&&void 0!==I)for(const e of I)Q.filter((t=>e.field_id===t.id)).length>0&&X.push(e);if(_)for(const e of z){let t=!1;if(e.show_with_options&&"warning"===e.status&&(t=Q.filter((t=>e.show_with_options.includes(t.id))).length>0),t||e.menu_id===G){let t={};t.title=!!e.title&&e.title,t.label=e.label,t.id=e.id,t.text=e.message,t.url=e.url,t.linked_field=e.show_with_option,X.push(t)}}for(const e of Q.filter((e=>e.help&&!e.conditionallyDisabled))){let t=e.help;0===X.filter((e=>e.id&&e.id===t.id)).length&&X.push(e.help)}X=X.filter((e=>"completed"!==e.label.toLowerCase()));let Z=B.filter((e=>"enable_cookie_banner"===e.id&&"yes"===e.value)).length>0,ee=q?`#${V}/${G}`:Y,te=Z?"#banner":"#dashboard";return te=q?`#${V}/${G}`:te,(0,l.createElement)(l.Fragment,null,v&&L&&(0,l.createElement)("div",{className:"cmplz-confetti"},(0,l.createElement)(L,{zIndex:999999})),(0,l.createElement)("div",{className:"cmplz-wizard-settings cmplz-column-2"},W.map(((e,t)=>(0,l.createElement)(f.default,{key:"groups-"+t,fallback:"Could not load: Banner preview"},(0,l.createElement)(i.default,{key:t,index:t,group:e,fields:Q})))),(0,l.createElement)("div",{className:"cmplz-grid-item-footer-container"},(0,l.createElement)(h,null),(0,l.createElement)("div",{className:"cmplz-grid-item-footer"},"wizard"!==V&&(0,l.createElement)("div",{className:"cmplz-grid-item-footer-upsell-bar"},!cmplz_settings.is_premium&&(0,l.createElement)("a",{className:"button button-default",href:"https://complianz.io/pricing",target:"_blank",rel:"noopener noreferrer"},(0,r.__)("Get Premium","complianz-gdpr"))),(0,l.createElement)("div",{className:"cmplz-grid-item-footer-buttons"},"#"!==j&&(0,l.createElement)("a",{href:j,onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})}},(0,r.__)("Previous","complianz-gdpr")),O()&&(0,l.createElement)("button",{className:"button button-default",onClick:e=>J(!1,!0)},(0,r.__)("Save","complianz-gdpr")),G!==K[K.length-1].id&&(0,l.createElement)(l.Fragment,null,O()&&(0,l.createElement)("a",{disabled:q,className:"button button-primary",href:ee,onClick:e=>{J(!1,!1),window.scrollTo({top:0,behavior:"smooth"})}},(0,r.__)("Save and Continue","complianz-gdpr")),!O()&&(0,l.createElement)("a",{className:"button button-primary",href:ee,onClick:e=>J(!1,!1)},(0,r.__)("Continue","complianz-gdpr"))),"wizard"===V&&G===K[K.length-1].id&&(0,l.createElement)("a",{disabled:q||C||x,className:"button button-primary",href:"#",onClick:e=>(async e=>{e.preventDefault(),q||(M(!0),b(!0),J(!0,!1),M(!1),window.location.hash=te,setTimeout((async()=>{b(!1)}),2e3))})(e)},(0,r.__)("Finish","complianz-gdpr")))))),(0,l.createElement)("div",{className:"cmplz-wizard-help"},(0,l.createElement)("div",{className:"cmplz-help-header"},(0,l.createElement)("h3",{className:"cmplz-h4"},(0,r.__)("Notifications","complianz-gdpr")),(0,l.createElement)("div",{className:"cmplz-help-control",onClick:()=>{t(!e)}},!e&&(0,r.__)("Expand all","complianz-gdpr"),e&&(0,r.__)("Collapse all","complianz-gdpr"))),X.map(((t,n)=>(0,l.createElement)(f.default,{key:"field-"+n,fallback:"Could not load: Help notices"},(0,l.createElement)(s.default,{key:n,noticesExpanded:e,help:t,fieldId:t.id}))))),"banner"===V&&w&&(0,l.createElement)(f.default,{fallback:"Could not load: Banner preview"},(0,l.createElement)(w,null)))},h=()=>{const[e,t]=(0,c.useState)(0);return(0,c.useEffect)((()=>{window.addEventListener("scroll",(()=>{let e=document.documentElement.scrollHeight-document.documentElement.clientHeight,n=Math.round(window.scrollY/e*100);n=Math.max(5,n),t(n)}))}),[]),document.documentElement.scrollHeight<=document.documentElement.clientHeight?null:(0,l.createElement)("span",{className:"cmplz-grid-item-footer-scroll-progress-container"},(0,l.createElement)("span",{className:"cmplz-grid-item-footer-scroll-progress",style:{width:e+"%"}},e,"%"))}},62540:(e,t,n)=>{n.r(t),n.d(t,{default:()=>g});var l=n(51280),a=n(58736),i=n(93396),s=n(38924),c=n(59296),r=n(88496),o=n(25536),m=n(76300),d=n(94880),u=n(24300),p=n.n(u);const g=e=>{const{highLightField:t,getFieldValue:u}=(0,o.default)(),{licenseStatus:g}=(0,c.default)(),{bannerDataLoaded:f}=(0,m.default)();let _="https://complianz.io/pricing/";const{subMenu:h,getMenuRegions:z,selectedSubMenuItem:E}=(0,s.default)();let v=z(),b=u("regions");Array.isArray(b)||(b=[b]),v=v.filter((e=>b.includes(e)));const[y,N]=(0,r.useState)(null);(0,r.useEffect)((()=>{Promise.resolve().then(n.bind(n,34048)).then((({default:e})=>{N((()=>e))}))}),[]);let k,w=[];for(const t of e.fields)t.group_id===e.group&&w.push(t);for(const e of h.menu_items)if(e.id===E?k=e:e.menu_items&&(k=e.menu_items.filter((e=>e.id===E))[0]),k)break;for(const t of h.menu_items)if(t.id===E&&t.hasOwnProperty("groups")){let n=t.groups.filter((t=>t.id===e.group));n.length>0&&(k=n[0])}if(!k)return null;let D=k.premium_text?k.premium_text:(0,i.__)("Learn more about %sPremium%s","complianz-gdpr");cmplz_settings.is_premium&&(D="empty"===g||"deactivated"===g?cmplz_settings.messageInactive:cmplz_settings.messageInvalid);let L=!1;k.premium&&(L=!cmplz_settings.is_premium,cmplz_settings.is_premium&&(L="valid"!==g&&"license"!==k.id)),_=k.upgrade?k.upgrade:_;let S=k.helpLink_text?k.helpLink_text:(0,i.__)("Instructions","complianz-gdpr"),x=L?"cmplz-disabled":"";return w.filter((e=>e.conditionallyDisabled&&!0===e.conditionallyDisabled||e.visible&&!1===e.visible)).length===w.length?null:(0,l.createElement)("div",{className:"cmplz-grid-item cmplz-"+k.id+" "+x,key:k.id},k.title&&(0,l.createElement)("div",{className:"cmplz-grid-item-header"},(0,l.createElement)("h3",{className:"cmplz-h4"},k.title),v.length>0&&(0,l.createElement)("div",{className:"cmplz-grid-item-controls"},v.map(((e,t)=>(0,l.createElement)("div",{key:t},(0,l.createElement)("img",{className:"cmplz-settings-region",src:cmplz_settings.plugin_url+"/assets/images/"+e+".svg",alt:"region"}))))),0===v.length&&k.helpLink&&(0,l.createElement)("div",{className:"cmplz-grid-item-controls"},(0,l.createElement)(a.default,{target:"_blank",rel:"noopener noreferrer",className:"cmplz-helplink",text:S,url:k.helpLink}))),(0,l.createElement)("div",{className:"cmplz-grid-item-content"},k.intro&&(0,l.createElement)("div",{className:"cmplz-settings-block-intro",dangerouslySetInnerHTML:{__html:p().sanitize(k.intro)}})," ",y&&w.map(((e,n)=>(0,l.createElement)(d.default,{key:"field-"+e.id,fallback:"Could not load field "+e.id},(0,l.createElement)(y,{key:e.id,field:e,highLightField:t}))))),L&&(0,l.createElement)("div",{className:"cmplz-locked"},(0,l.createElement)("div",{className:"cmplz-locked-overlay"},(0,l.createElement)("span",{className:"cmplz-task-status cmplz-premium"},(0,i.__)("Upgrade","complianz-gdpr")),(0,l.createElement)("span",null,cmplz_settings.is_premium&&(0,l.createElement)("span",null,D," ",(0,l.createElement)("a",{className:"cmplz-locked-link",href:cmplz_settings.license_url},(0,i.__)("Check license","complianz-gdpr"))),!cmplz_settings.is_premium&&(0,l.createElement)(a.default,{target:"_blank",rel:"noopener noreferrer",text:D,url:_})))),"banner"===h.id&&!f&&(0,l.createElement)("div",{className:"cmplz-locked"},(0,l.createElement)("div",{className:"cmplz-locked-overlay"})))}},44924:(e,t,n)=>{n.r(t),n.d(t,{in_array:()=>l});const l=(e,t)=>{let n=t.length;for(let l=0;l<n;l++)if(t[l]==e)return!0;return!1}}}]);