"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[3407,9166,9684],{9684:(e,s,t)=>{t.r(s),t.d(s,{default:()=>u});var l=t(27723),a=t(45111),c=t(47143),i=t(9588),n=t(99166),r=t(4219),d=t(32828),o=t(52043),p=t(99418),m=t(10790);const u=({notice:e,index:s})=>{const{dismissNotice:t,fetchProgressData:u}=(0,d.default)(),{getField:h,setHighLightField:_,fetchFieldsData:g}=(0,r.default)(),{setSelectedSubMenuItem:f}=(0,o.default)();let z="premium"===e.icon,b=e.url&&-1!==e.url.indexOf("complianz.io"),x=e.status.charAt(0).toUpperCase()+e.status.slice(1);return(0,m.jsxs)("div",{className:"cmplz-task-element",children:[(0,m.jsx)("span",{className:"cmplz-task-status cmplz-"+e.status,children:x}),(0,m.jsx)("p",{className:"cmplz-task-message",dangerouslySetInnerHTML:{__html:p.A.sanitize(e.message)}}),b&&e.url&&(0,m.jsx)("a",{target:"_blank",href:e.url,rel:"noopener noreferrer",children:(0,l.__)("More info","complianz-gdpr")}),e.clear_cache_id&&(0,m.jsx)("span",{className:"cmplz-task-enable button button-secondary",onClick:()=>(async e=>{let s={};s.cache_id=e,i.doAction("clear_cache",s).then(async e=>{(0,c.dispatch)("core/notices").createNotice("success",(0,l.__)("Re-started test","complianz-gdpr"),{__unstableHTML:!0,id:"cmplz_clear_cache",type:"snackbar",isDismissible:!0}).then((0,n.default)(3e3)).then(e=>{(0,c.dispatch)("core/notices").removeNotice("rsssl_clear_cache")}),await g(),await u()})})(e.clear_cache_id),children:(0,l.__)("Re-check","complianz-gdpr")}),!z&&!b&&e.url&&(0,m.jsx)("a",{className:"cmplz-task-enable button button-secondary",href:e.url,children:(0,l.__)("View","complianz-gdpr")}),!z&&e.highlight_field_id&&(0,m.jsx)("span",{className:"cmplz-task-enable button button-secondary",onClick:()=>(async()=>{_(e.highlight_field_id);let s=h(e.highlight_field_id);await f(s.menu_id)})(),children:(0,l.__)("View","complianz-gdpr")}),e.plus_one&&(0,m.jsx)("span",{className:"cmplz-plusone",children:"1"}),e.dismissible&&"completed"!==e.status&&(0,m.jsx)("div",{className:"cmplz-task-dismiss",children:(0,m.jsx)("button",{type:"button",onClick:s=>t(e.id),children:(0,m.jsx)(a.default,{name:"times"})})})]},s)}},93407:(e,s,t)=>{t.r(s),t.d(s,{default:()=>o});var l=t(86087),a=t(27723),c=t(9684),i=t(99695),n=t(32828),r=t(4219),d=t(10790);const o=()=>{const{percentageCompleted:e,filter:s,notices:t,progressLoaded:o,fetchProgressData:p,error:m}=(0,n.default)(),{fetchAllFieldsCompleted:u,allRequiredFieldsCompleted:h,fields:_}=(0,r.default)();(0,l.useEffect)(()=>{(async()=>{o||await p(),u()})()},[s,_]);let g="";if(e<80&&(g+="cmplz-orange"),!o||m)return(0,d.jsx)(i.default,{lines:"9",error:m});let f=t;if("remaining"===s&&(f=f.filter(function(e){return"completed"!==e.status})),!h&&0===f.filter(e=>"all_fields_completed"===e.id).length){let e={id:"all_fields_completed",status:"urgent",message:(0,a.__)('Not all fields have been entered, or you have not clicked the "finish" button yet.',"complianz-gdpr")};f.push(e)}h&&(f=f.filter(e=>"all_fields_completed"!==e.id)),f.sort(function(e,s){return e.status===s.status?0:e.status<s.status?1:-1});let z=f.filter(e=>"open"===e.status||"urgent"===e.status);return(0,d.jsxs)("div",{className:"cmplz-progress-block",children:[(0,d.jsx)("div",{className:"cmplz-progress-bar",children:(0,d.jsx)("div",{className:"cmplz-progress",children:(0,d.jsx)("div",{className:"cmplz-bar "+g,style:Object.assign({},{width:e+"%"})})})}),(0,d.jsxs)("div",{className:"cmplz-progress-text",children:[(0,d.jsxs)("h1",{className:"cmplz-progress-percentage",children:[e,"%"]}),(0,d.jsxs)("h5",{className:"cmplz-progress-text-span",children:[e<100&&(0,a.__)("Consent Management is activated on your site.","complianz-gdpr")+" ",e<100&&1===z.length&&(0,a.__)("You still have 1 task open.","complianz-gdpr"),e<100&&z.length>1&&(0,a.__)("You still have %s tasks open.","complianz-gdpr").replace("%s",z.length),100===e&&(0,a.__)("Well done! Your website is ready for your selected regions.","complianz-gdpr")]})]}),(0,d.jsx)("div",{className:"cmplz-scroll-container",children:f.map((e,s)=>(0,d.jsx)(c.default,{index:s,notice:e},s))})]})}},99166:(e,s,t)=>{t.r(s),t.d(s,{default:()=>l});const l=e=>function(s){return new Promise(t=>setTimeout(()=>t(s),e))}}}]);