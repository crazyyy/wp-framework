"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[17,5207,8414],{5207:(e,t,c)=>{c.r(t),c.d(t,{default:()=>a});var o=c(81621),i=c(16535),n=c(9588),s=c(73710);const a=(0,o.vt)((e,t)=>({documentsLoaded:!1,savedDocument:{},conclusions:[],region:"",fileName:"",fetching:!1,updating:!1,loadingFields:!1,documents:[],regions:[],fields:[],editDocumentId:!1,resetEditDocumentId:t=>{e({editDocumentId:!1,region:""})},editDocument:async t=>{e({updating:!0}),await n.doAction("load_databreach_report",{id:t}).then(t=>{e({fields:t.fields,region:t.region,updating:!1,fileName:t.file_name})}).catch(e=>{console.error(e)}),e({editDocumentId:t})},setRegion:t=>{e({region:t})},updateField:(c,o)=>{let n=!1,a=!1;e((0,i.Ay)(e=>{e.fields.forEach(function(e,t){e.id===c&&(a=t,n=!0)}),!1!==a&&(e.fields[a].value=o)}));let d=(0,s.updateFieldsListWithConditions)(t().fields);e({fields:d})},save:async c=>{e({updating:!0});let o=t().editDocumentId,i=0;await n.doAction("save_databreach_report",{fields:t().fields,region:c,post_id:o}).then(t=>(i=t.post_id,e({updating:!1,conclusions:t.conclusions}),t)).catch(e=>{console.error(e)}),await t().fetchData();let s=t().documents.filter(e=>e.id===i);s.length>0&&e({savedDocument:s[0]})},deleteDocuments:async c=>{let o=t().documents.filter(e=>c.includes(e.id));e(e=>({documents:e.documents.filter(e=>!c.includes(e.id))}));let i={};i.documents=o,await n.doAction("delete_databreach_report",i).then(e=>e).catch(e=>{console.error(e)})},fetchData:async()=>{if(t().fetching)return;e({fetching:!0});const{documents:c,regions:o}=await n.doAction("get_databreach_reports",{}).then(e=>e).catch(e=>{console.error(e)});e(e=>({documentsLoaded:!0,documents:c,regions:o,fetching:!1}))},fetchFields:async t=>{let c={region:t};e({loadingFields:!0});const{fields:o}=await n.doAction("get_databreach_report_fields",c).then(e=>e).catch(e=>{console.error(e)});let i=(0,s.updateFieldsListWithConditions)(o);e(e=>({fields:i,loadingFields:!1}))}}))},38414:(e,t,c)=>{c.r(t),c.d(t,{default:()=>a});var o=c(86087),i=c(45111),n=c(99418),s=c(10790);const a=(0,o.memo)(({conclusion:e,delay:t})=>{const[c,a]=(0,o.useState)(!0);(0,o.useEffect)(()=>{setTimeout(()=>{d()},t)});const d=()=>{a(!1)};let l="green";return"warning"===e.report_status&&(l="orange"),"error"===e.report_status&&(l="red"),(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsxs)("li",{className:"cmplz-conclusion__check icon-loading",children:[(0,s.jsx)(i.default,{name:"loading",color:"grey"}),(0,s.jsxs)("div",{className:"cmplz-conclusion__check--report-text",children:[" ",e.check_text," "]})]}),!c&&(0,s.jsxs)("li",{className:"cmplz-conclusion__check icon-"+e.report_status,children:[(0,s.jsx)(i.default,{name:e.report_status,color:l}),(0,s.jsx)("div",{className:"cmplz-conclusion__check--report-text",dangerouslySetInnerHTML:{__html:n.A.sanitize(e.report_text)},children:" "})]})]})})},90017:(e,t,c)=>{c.r(t),c.d(t,{default:()=>l});var o=c(5207),i=c(86087),n=c(27723),s=c(4219),a=c(38414),d=c(10790);const l=(0,i.memo)(()=>{const{savedDocument:e,conclusions:t}=(0,o.default)(),{addHelpNotice:c}=(0,s.default)();return(0,i.useEffect)(()=>{e.has_to_be_reported&&c("create-data-breach-reports","warning",(0,n.__)("This wizard is intended to provide a general guide to a possible data breach.","complianz-gdpr")+" "+(0,n.__)("Specialist legal advice should be sought about your specific circumstances.","complianz-gdpr"),(0,n.__)("Specialist legal advice required","complianz-gdpr"),!1)},[e]),(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)("div",{id:"cmplz-conclusion",children:[(0,d.jsx)("h3",{children:(0,n.__)("Your dataleak report:","complianz-gdpr")}),(0,d.jsx)("ul",{className:"cmplz-conclusion__list",children:t.length>0&&t.map((e,t)=>(0,d.jsx)(a.default,{conclusion:e,delay:1e3*t},t))})]})})})}}]);