"use strict";(globalThis.webpackChunkcomplianz_gdpr=globalThis.webpackChunkcomplianz_gdpr||[]).push([[135,482],{40135:(e,t,n)=>{n.r(t),n.d(t,{default:()=>p});var r=n(4219),s=n(88499),c=n(86087),l=n(99418),a=n(70482),o=n(52043),i=n(10790);const p=()=>{const{selectedSubMenuItem:e}=(0,o.default)(),t=(0,c.useRef)(null),{fields:n,updateField:p,getFieldValue:u,getField:d,setChangedField:f,changedFields:m,fetchFieldsData:y,updateFieldsData:g,fieldsLoaded:z}=(0,r.default)(),{setBannerContainerClass:_,bannerContainerClass:S,cssLoading:b,cssLoaded:h,generatePreviewCss:v,pageLinks:k,selectedBanner:w,selectedBannerId:q,tcfActiveServerside:x,fetchBannerData:L,setBannerDataLoaded:E,bannerDataLoaded:A,bannerHtml:P,manageConsentHtml:I,consentType:T}=(0,s.default)(),[O,C]=(0,c.useState)(null),[F,H]=(0,c.useState)(0),[M,D]=(0,c.useState)(!1),[j,B]=(0,c.useState)(!1),[W,V]=(0,c.useState)(!1),[R,N]=(0,c.useState)(!1);(0,c.useEffect)(()=>{if(!z||!A)return;let e="tcf"===u("uses_ad_cookies_personalized")||"yes"===u("uses_ad_cookies_personalized");"no"===u("uses_ad_cookies")&&(e=!1),B(e),V(!0)},[z,A,u("uses_ad_cookies_personalized")]),(0,c.useEffect)(()=>{G()},[window.location.hash,z,A]),(0,c.useEffect)(()=>{W&&G()},[j]),(0,c.useEffect)(()=>{W&&j!==x&&G()},[j,x,w]),(0,c.useEffect)(()=>{W&&j!==x&&G()},[w]),(0,c.useEffect)(()=>{G()},[u("a_b_testing_buttons")]),(0,c.useEffect)(()=>{A&&(p("consent_type",T),f("consent_type",T))},[T]),(0,c.useEffect)(()=>{g(e)},[u("consent_type")]),(0,c.useEffect)(()=>{""!==T&&p("consent_type",T)},[T]),(0,c.useEffect)(()=>{K(),H(F+1)},[m]),(0,c.useEffect)(()=>{q>0&&(J(),H(F+1))},[q,T,A,j]),(0,c.useEffect)(()=>{J()},[A,u("consent_type"),u("uses_ad_cookies_personalized"),u("uses_ad_cookies")]),(0,c.useEffect)(()=>{q>0&&M&&U()},[F,q,j,M]);const G=async()=>{await L(),await y(e),p("consent_type",T),H(F+1)},J=()=>{if(!A)return;let e=Z();for(const t of e)if(w.hasOwnProperty(t.id)){let e=w[t.id];u(t.id)!==e&&p(t.id,e)}D(!0),p("manage_consent",w.revoke)},K=()=>{let e=Z();for(const t of e)w.hasOwnProperty(t.id)&&w[t.id]!==t.value&&(w[t.id]=t.value)},Q=async()=>{clearTimeout(O);let e=Z();if(R){const t=setTimeout(async()=>{await v(e)},500);C(t)}else await v(e),N(!0)},U=async()=>{await Q(),"optin"===T&&$()&&await Q()};(0,c.useEffect)(()=>{if(!j)return;const e=t.current;if(t.current&&"optin"===T&&e){let t=d("tcf_purposes"),n=(0,a.filterArray)(t.options,t.value);const r=(0,a.getPurposes)("marketing",!1),s=(0,a.getPurposes)("statistics",!1),c=(0,a.filterArray)(n,r),l=(0,a.filterArray)(n,s);let o=d("tcf_features"),i=(0,a.filterArray)(o.options,o.value),p=d("tcf_specialFeatures"),u=(0,a.filterArray)(p.options,p.value),f=d("tcf_specialPurposes"),m=(0,a.filterArray)(f.options,f.value);const y=e.querySelector(".cmplz-tcf .cmplz-marketing .cmplz-description"),g=e.querySelector(".cmplz-tcf .cmplz-statistics .cmplz-description"),z=e.querySelector(".cmplz-tcf .cmplz-features .cmplz-description"),_=e.querySelector(".cmplz-tcf .cmplz-specialfeatures .cmplz-title"),S=e.querySelector(".cmplz-tcf .cmplz-specialpurposes .cmplz-title");let b=e.querySelector(".cmplz-tcf .cmplz-features"),h=e.querySelector(".cmplz-tcf .cmplz-specialpurposes"),v=e.querySelector(".cmplz-tcf .cmplz-specialfeatures"),k=e.querySelector(".cmplz-tcf .cmplz-statistics");0===i.length&&b&&(b.style.display="none"),0===m.length&&h&&(h.style.display="none"),0===u.length&&v&&(v.style.display="none"),0===l.length&&k&&(k.style.display="none"),y&&(y.innerHTML=(0,a.concatenateString)(c)),g&&(g.innerHTML=(0,a.concatenateString)(l)),z&&(z.innerHTML=(0,a.concatenateString)(i)),_&&(_.innerHTML=(0,a.concatenateString)(u)),S&&(S.innerHTML=(0,a.concatenateString)(m))}},[j,F,A,T,b,n]);const X=(e,t,n)=>{if(-1===e.indexOf(t))return e;let r=new RegExp(t,"g");return e.replace(r,n)},Y=e=>(new DOMParser).parseFromString(e,"text/html").documentElement.textContent,Z=()=>n.filter(e=>"banner"===e.data_target),$=()=>{if("bottom"===u("position"))return!1;if(j)return!1;if(!0===u("disable_width_correction"))return!1;if(!document.querySelector(".cmplz-categories"))return;document.querySelector(".cmplz-categories").style.display="block";let e=document.querySelector(".cmplz-categories").offsetWidth;document.querySelector(".cmplz-categories").style.display="none";let t=document.querySelector(".cmplz-message").offsetWidth,n=document.querySelector(".cmplz-cookiebanner").offsetWidth,r=1.3*n,s=0,c=0,l=!1,a=window.getComputedStyle(document.querySelector(".cmplz-cookiebanner"),null).getPropertyValue("padding-left"),o=window.getComputedStyle(document.querySelector(".cmplz-cookiebanner"),null).getPropertyValue("padding-left");if(-1!==a.indexOf("px")&&-1!==o.indexOf("px")&&(l=parseInt(a.replace("px",""))+parseInt(o.replace("px",""))),e>0&&l&&n-l>e){let t=n-42-e;s=parseInt(n)+parseInt(t)}let i=0;if(i=document.querySelectorAll(".cmplz-buttons .cmplz-btn").offsetWidth,i>t){let e=i-42-t;c=parseInt(i)+parseInt(e)}let d=0;return d=c>s?c:s,d>n&&d<r&&(d%2!=0&&d++,p("banner_width",d),!0)},ee=e=>{let t={use_logo:"logo",category_all:"category_marketing",category_stats:"category_statistics",category_prefs:"category_preferences",accept_informational:"accept_optout",accept:"accept_optin",view_preferences:"manage_options",save_preferences:"save_settings"};return t.hasOwnProperty(e)?t[e]:e};let te=1==u("hide_preview")||1==u("disable_cookiebanner");if(!A||!h||te||!M)return(0,i.jsx)(i.Fragment,{});let ne=P,re=I,se=Z();ne=X(ne,"{consent_type}",T),ne=X(ne,"{id}",w.ID),ne=X(ne,"{vendor_count}","optin"===T?643:""),re=X(re,"{id}",w.ID);for(const e of se){if("title"===e.id)continue;let t=ee(e.id);if(w.hasOwnProperty(e.id)){let n=w[e.id];ne="text_checkbox"===e.type&&n&&n.hasOwnProperty("text")?X(ne,"{"+t+"}",n.text):"banner_logo"===e.type?X(ne,"{"+t+"}",w.logo_options[n]?w.logo_options[n]:""):X(ne,"{"+t+"}",n)}"revoke"===e.id&&(re=X(re,"{manage_consent}",w.revoke))}return(()=>{let e=document.querySelector("#cmplz-cookiebanner-container");e&&e.querySelectorAll(".cmplz-links a:not(.cmplz-external), .cmplz-buttons a:not(.cmplz-external)").forEach(e=>{e.classList.add("cmplz-hidden");for(let t in k)k.hasOwnProperty(t)&&e.classList.contains(t)&&(e.setAttribute("href",k[t].url+e.getAttribute("data-relative_url")),"{title}"===e.innerText&&(e.innerText=Y(k[t].title)),e.classList.remove("cmplz-hidden"))}),(()=>{let e=document.querySelector(".cmplz-manage-consent"),t=document.querySelector("#cmplz-cookiebanner-container .cmplz-cookiebanner");e&&(e.style.display="none"),document.addEventListener("click",n=>{n.target.closest(".cmplz-manage-consent")&&(t&&t.style.removeProperty("display"),e&&(e.style.display="none")),(n.target.closest(".cmplz-close")||n.target.closest(".cmplz-accept")||n.target.closest(".cmplz-deny"))&&(t&&(t.style.display="none"),e&&(e.style.display="block")),t&&n.target.closest(".cmplz-view-preferences")&&(t.classList.add("cmplz-categories-visible"),t.querySelector(".cmplz-categories").style.display="block",t.querySelector(".cmplz-categories").classList.add("cmplz-fade-in"),t.querySelector(".cmplz-view-preferences").style.display="none",t.querySelector(".cmplz-save-preferences").style.display="block"),t&&n.target.closest(".cmplz-save-preferences")&&(t.classList.remove("cmplz-categories-visible"),t.querySelector(".cmplz-categories").style.display="none",t.querySelector(".cmplz-categories").classList.remove("cmplz-fade-in"),t.querySelector(".cmplz-view-preferences").style.display="block",t.querySelector(".cmplz-save-preferences").style.display="none")})})()})(),(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{id:"cmplz-preview-banner-container",ref:t,children:[(0,i.jsx)("div",{id:"cmplz-cookiebanner-container",className:S,dangerouslySetInnerHTML:{__html:l.A.sanitize(ne)}})," ",(0,i.jsx)("div",{id:"cmplz-manage-consent","data-nosnippet":"true",dangerouslySetInnerHTML:{__html:l.A.sanitize(re)}})]})})}},70482:(e,t,n)=>{n.r(t),n.d(t,{concatenateString:()=>c,filterArray:()=>s,getPurposes:()=>r});const r=(e,t)=>"functional"===e||"preferences"===e?[]:"marketing"===e?t?[1,2,3,4,5,6,7,8,9,10]:[1,2,3,4,5,6,10]:"statistics"===e?[1,7,8,9]:void 0,s=(e,t)=>{e||(e={}),Array.isArray(t)||(t=Object.keys(e));const n=t.map(e=>parseInt(e));return Object.keys(e).filter(e=>n.includes(parseInt(e))).map(t=>e[t])},c=e=>{let t="";const n=e.length-1;for(var r in e)e.hasOwnProperty(r)&&(t+=e[r],t+=r<n?", ":".");return t}}}]);