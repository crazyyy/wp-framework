jQuery(function(n){var e={};e.modal={self:this,id:void 0,selectedFormat:void 0,init:function(){var o=n(".wp-mail-logging-active-format"),i=wpml_modal_ajax.default_format;0<o.length&&o.data("format")&&(i=o.data("format")),e.modal.setSelectedFormat(i),e.modal.bindActions()},bindActions:function(){n(document).on("click",".wp-mail-logging-modal-format",function(o){o.preventDefault();o=n(this).data("format");o&&e.modal.setSelectedFormat(o)}),n(document).on("click",".wp-mail-logging-html-error-notice > .notice-dismiss",function(o){o.preventDefault(),($noticeElem=n(this).parent(".wp-mail-logging-html-error-notice")).length<=0||$noticeElem.fadeTo(100,0,function(){$noticeElem.slideUp(100,function(){$noticeElem.remove()})})})},clear:function(){n("#wp-mail-logging-modal-content-body-content").html("")},set:function(o){n(".wp-mail-logging-modal-format").removeClass("wp-mail-logging-active-format"),n("#wp-mail-logging-modal-format-"+e.modal.selectedFormat).addClass("wp-mail-logging-active-format"),n("#wp-mail-logging-modal-content-body-content").html(o)},show:function(){n("#wp-mail-logging-product-education-email-logs-bottom").css("z-index",-1),n("#wp-mail-logging-modal-wrap").fadeIn()},hide:function(){n("#wp-mail-logging-modal-wrap").fadeOut(400,function(){n("#wp-mail-logging-product-education-email-logs-bottom").css("z-index","")})},setSelectedFormat:function(o){e.modal.selectedFormat=o,jQuery.ajax({type:"POST",url:ajaxurl,data:{action:wpml_modal_ajax.action,_ajax_nonce:wpml_modal_ajax.nonce,id:e.modal.id,format:e.modal.selectedFormat},success:e.modal.ajaxResponse,error:e.modal.ajaxError})},ajaxResponse:function(o,i,a){o.success?e.modal.set(o.data):e.modal.set("Error ("+o.data.code+"): '"+o.data.message+"'")},ajaxError:function(o,i,a){e.modal.set(a)}};var l=function(o,i,a){var n,e=new RegExp("([?&])"+o+"=.*?(&|#|$)(.*)","gi");return e.test(a)?null!=i?a.replace(e,"$1"+o+"="+i+"$2$3"):(a=(n=a.split("#"))[0].replace(e,"$1$3").replace(/(&|\?)$/,""),void 0!==n[1]&&null!==n[1]&&(a+="#"+n[1]),a):(null!=i&&(e=-1!==a.indexOf("?")?"&":"?",a=(n=a.split("#"))[0]+e+o+"="+i,void 0!==n[1])&&null!==n[1]&&(a+="#"+n[1]),a)};n(".wp-mail-logging-action-item").click(function(o){if(o.preventDefault(),"undefined"!=typeof wp_mail_logging_admin_logs&&void 0!==wp_mail_logging_admin_logs.single_log_action_nonce&&void 0!==wp_mail_logging_admin_logs.single_log_action_key&&void 0!==wp_mail_logging_admin_logs.admin_email_logs_url){var o=n(this),i=o.parent(".wp-mail-logging-action-column");if(!(i.length<=0)){var a,i=i.data("mail-id"),o=o.data("action");if(i&&o){if("resend"===o||"delete"===o)return a=l("action",o,wp_mail_logging_admin_logs.admin_email_logs_url),a=l("email_log_id",i,a),a=l(wp_mail_logging_admin_logs.single_log_action_key,wp_mail_logging_admin_logs.single_log_action_nonce,a),"delete"===o?void n.confirm({animateFromElement:!1,animationBounce:1,backgroundDismiss:!1,buttons:{confirm:{text:WPMailLoggingJqueryConfirm.yes,btnClass:"btn-confirm",keys:["enter"],action:function(){window.location.href=a}},cancel:{text:WPMailLoggingJqueryConfirm.cancel,btnClass:"btn-cancel"}},content:WPMailLoggingJqueryConfirm.delete_log_confirm_msg,draggable:!1,escapeKey:!0,theme:"modern",type:"orange",typeAnimated:!1,title:WPMailLoggingJqueryConfirm.headsup,useBootstrap:!1,boxWidth:"400px",icon:'"></i><img src="'+WPMailLoggingJqueryConfirm.icon+'" style="width: 40px; height: 40px;" alt="'+WPMailLoggingJqueryConfirm.warning+'"><i class="'}):void(window.location.href=a);e.modal.id=i,e.modal.init(),e.modal.show()}}}}),n(".wp-mail-logging-modal-close").click(function(o){o.preventDefault(),e.modal.hide()}),n(document).keyup(function(o){27===o.keyCode&&e.modal.hide()})});