jQuery(function(l){var i={};i.modal={self:this,id:void 0,selectedFormat:void 0,init:function(){var o=l(".wp-mail-logging-active-format"),a=wpml_modal_ajax.default_format;0<o.length&&o.data("format")&&(a=o.data("format")),i.modal.setSelectedFormat(a),i.modal.bindActions()},bindActions:function(){l(document).on("click",".wp-mail-logging-modal-format",function(o){o.preventDefault();o=l(this).data("format");o&&i.modal.setSelectedFormat(o)}),l(document).on("click",".wp-mail-logging-html-error-notice > .notice-dismiss",function(o){o.preventDefault(),($noticeElem=l(this).parent(".wp-mail-logging-html-error-notice")).length<=0||$noticeElem.fadeTo(100,0,function(){$noticeElem.slideUp(100,function(){$noticeElem.remove()})})})},clear:function(){l("#wp-mail-logging-modal-content-body-content").html("")},set:function(o){l(".wp-mail-logging-modal-format").removeClass("wp-mail-logging-active-format"),l("#wp-mail-logging-modal-format-"+i.modal.selectedFormat).addClass("wp-mail-logging-active-format"),l("#wp-mail-logging-modal-content-body-content").html(o)},show:function(){l("#wp-mail-logging-product-education-email-logs-bottom").css("z-index",-1),l("#wp-mail-logging-modal-wrap").fadeIn()},hide:function(){l("#wp-mail-logging-modal-wrap").fadeOut(400,function(){l("#wp-mail-logging-product-education-email-logs-bottom").css("z-index","")})},setSelectedFormat:function(o){i.modal.selectedFormat=o,jQuery.ajax({type:"POST",url:ajaxurl,data:{action:wpml_modal_ajax.action,_ajax_nonce:wpml_modal_ajax.nonce,id:i.modal.id,format:i.modal.selectedFormat},success:i.modal.ajaxResponse,error:i.modal.ajaxError})},ajaxResponse:function(o,a,l){o.success?i.modal.set(o.data):i.modal.set("Error ("+o.data.code+"): '"+o.data.message+"'")},ajaxError:function(o,a,l){i.modal.set(l)}};var n=function(o,a,l){var i,n=new RegExp("([?&])"+o+"=.*?(&|#|$)(.*)","gi");return n.test(l)?null!=a?l.replace(n,"$1"+o+"="+a+"$2$3"):(l=(i=l.split("#"))[0].replace(n,"$1$3").replace(/(&|\?)$/,""),void 0!==i[1]&&null!==i[1]&&(l+="#"+i[1]),l):(null!=a&&(n=-1!==l.indexOf("?")?"&":"?",l=(i=l.split("#"))[0]+n+o+"="+a,void 0!==i[1])&&null!==i[1]&&(l+="#"+i[1]),l)};l(".wp-mail-logging-action-item").click(function(o){var a;o.preventDefault(),"undefined"==typeof wp_mail_logging_admin_logs||void 0===wp_mail_logging_admin_logs.single_log_action_nonce||void 0===wp_mail_logging_admin_logs.single_log_action_key||void 0===wp_mail_logging_admin_logs.admin_email_logs_url||(a=(o=l(this)).parent(".wp-mail-logging-action-column")).length<=0||(a=a.data("mail-id"),o=o.data("action"),a&&o&&("resend"===o||"delete"===o?(o=n("action",o,wp_mail_logging_admin_logs.admin_email_logs_url),o=n("email_log_id",a,o),o=n(wp_mail_logging_admin_logs.single_log_action_key,wp_mail_logging_admin_logs.single_log_action_nonce,o),window.location.href=o):(i.modal.id=a,i.modal.init(),i.modal.show())))}),l(".wp-mail-logging-modal-close").click(function(o){o.preventDefault(),i.modal.hide()}),l(document).keyup(function(o){27===o.keyCode&&i.modal.hide()})});