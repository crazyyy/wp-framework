!function(c,f,u){"use strict";var r=e=>!isNaN(parseFloat(e))&&isFinite(e);u.fields={},u.ready_class="fp-js-ready",u.plugin="fakerpress",u.abbr="fp",u.fieldName=function(e){return e=e.map(function(e){return new String(e)}),this.plugin+"["+e.join("][")+"]"},u.fieldId=function(e){return this.plugin+"-field-"+e.join("-")},u.searchId=function(e){var t=null;return void 0!==e.id?t=e.id:void 0!==e.ID?t=e.ID:void 0!==e.value&&(t=e.value),null==e?null:t},u.fields.dates=function(t,e){t(".fp-type-date").not(".hasDatepicker").datepicker({after:["attr"],constrainInput:!1,dateFormat:"yy-mm-dd"}),t(".fp-type-interval-wrap").each(function(){var e=t(this),n=e.find(".fp-type-dropdown"),i=e.find('[data-type="min"]'),r=e.find('[data-type="max"]');e.hasClass(u.ready_class)||(e.addClass(u.ready_class),i.on({change:function(e){i.parents(".fp-field-wrap").find('[data-type="max"]').datepicker("option","minDate",t(this).val()).datepicker("refresh"),t(".fp-type-date.hasDatepicker").datepicker("refresh")}}),r.on({change:function(e){r.parents(".fp-field-wrap").find('[data-type="min"]').datepicker("option","maxDate",t(this).val()).datepicker("refresh"),t(".fp-type-date.hasDatepicker").datepicker("refresh")}}),n.on({change:function(e){var t=n.find(":selected"),a=t.attr("min"),t=t.attr("max");i.datepicker("setDate",a),r.datepicker("setDate",t)}}).trigger("change"))})},u.fields.dropdown=function(s,o){var e=s(".fp-type-dropdown").not(".select2-offscreen, .select2-container"),t={wp_query_title:[]};t.wp_query_title.push("ID: &quot;<%= ID %>&quot;"),t.wp_query_title.push("Title: &quot;<%= post_title %>&quot;"),t.wp_query_title.push("Post Type: &quot;<%= post_type.labels.singular_name %>&quot;"),t.wp_query_title.push("Author: &quot;<%= post_author %>&quot;"),e.each(function(){var n,i=s(this),r={width:420};i.is("[multiple]")?(r.multiple=!0,i.is("[data-tags]")||(r.data=function(){return{results:i.data("options")}}),o.isArray(i.data("separator"))?r.tokenSeparators=i.data("separator"):r.tokenSeparators=[i.data("separator")],r.separator=i.data("separator"),r.regexSeparatorElements=["^("],r.regexSplitElements=["(?:"],s.each(r.tokenSeparators,function(e,t){r.regexSeparatorElements.push("[^"+t+"]+"),r.regexSplitElements.push("["+t+"]")}),r.regexSeparatorElements.push(")$"),r.regexSplitElements.push(")"),r.regexSeparatorString=r.regexSeparatorElements.join(""),r.regexSplitString=r.regexSplitElements.join(""),r.regexToken=new RegExp(r.regexSeparatorString,"ig"),r.regexSplit=new RegExp(r.regexSplitString,"ig"),r.id=u.searchId):r.width=200,r.matcher=function(e,t){var a=0==t.toUpperCase().indexOf(e.toUpperCase());return a||void 0===r.tags||(t=o.where(r.tags,{text:t}),0<r.tags.length&&o.isObject(t)&&(a=0==u.searchId(t[0]).toUpperCase().indexOf(e.toUpperCase()))),a},i.is("[data-tags]")&&(r.tags=i.data("options"),r.initSelection=function(e,t){var a=[];s(e.val().split(r.regexSplit)).each(function(){var e,t={id:this,text:this};0<r.tags.length&&o.isObject(r.tags[0])&&(0<(e=o.where(r.tags,{value:this})).length&&(t={id:(t=e[0]).value,text:t.text})),a.push(t)}),t(a)},r.createSearchChoice=function(e,t){if(e.match(r.regexToken))return{id:e,text:e}},0===r.tags.length&&(r.formatNoMatches=function(){return i.attr("placeholder")})),i.is("[data-source]")&&(n=i.data("source"),r.data={results:[]},r.allowClear=!0,r.escapeMarkup=function(e){return e},r.ajax={dataType:"json",type:"POST",url:window.ajaxurl,results:function(e){return s.each(e.results,function(e,t){t.id=t.ID}),e}},"WP_Query"===n?(r.formatSelection=function(e){return o.template('<abbr title="'+t.wp_query_title.join("&#13;&#10;")+'"><%= post_type.labels.singular_name %>: <%= ID %>')(e)},r.formatResult=function(e){return o.template('<abbr title="'+t.wp_query_title.join("&#13;&#10;")+'"><%= post_type.labels.singular_name %>: <%= ID %> <b>[</b> <em><%= post_title %></em> <b>]</b></abbr>')(e)},r.ajax.data=function(e,t){var a=o.intersection(s("#fakerpress-field-post_types").val().split(","),o.pluck(o.where(s("#fakerpress-field-post_types").data("options"),{hierarchical:!0}),"id"));return{action:"fakerpress.select2-"+n,query:{s:e,posts_per_page:10,paged:t,post_type:a}}}):(r.ajax.data=function(e,t){var a=i.parents(".fp-table-taxonomy").eq(0);return{action:"fakerpress.select2-"+n,search:e,page:t,page_limit:25,taxonomies:a.find(".fp-taxonomies").select2("val"),exclude:s(this).select2("val")}},r.formatSelection=function(e){return o.template("<%= taxonomy %>: <%= name %>")(e)},r.formatResult=function(e){return o.template("<%= taxonomy %>: <%= name %>")(e)})),i.select2(r)}).on("change",function(e){var t=s(this),a=s(this).data("value");t.is("[multiple]")&&t.is("[data-source]")&&(e.added?o.isArray(a)?a.push(e.added):a=[e.added]:a=o.isArray(a)?o.without(a,e.removed):[],t.data("value",a).attr("data-value",JSON.stringify(a)))})},u.fields.range=function(t,e){t(".fp-type-range-wrap").each(function(){var e=t(this),n=e.find('.fp-type-number[data-type="min"]'),i=e.find('.fp-type-number[data-type="max"]');e.hasClass(u.ready_class)||(e.addClass(u.ready_class),n.on({"change keyup":function(e){var t=parseInt(n.val(),10),a=parseInt(i.val(),10);r(t)?(i.prop("disabled",!1),a&&r(a)&&a<t&&n.val(a)):(i.prop("disabled",!0),n.val(""))}}).trigger("change"),i.on({"change keyup":function(e){var t=parseInt(n.val(),10),a=parseInt(i.val(),10);r(a)&&a<t&&n.val(a)}}).trigger("change"))})},u.fieldset={items:[{name:"meta",$:{},selector:{container:".fp-type-meta-container",item:".fp-table-meta",type_container:".fp-meta_type-container",type:".fp-meta_type",name_container:".fp-meta_name-container",name:".fp-meta_name",conf_container:".fp-meta_conf-container"},update:function(e){this.render(e)},render:function(e){var t=this,a=e.find(t.selector.type).select2("val"),n=(e.find(t.selector.name).val(),e.find(t.selector.name_container)),i=(e.find(t.selector.type_container),e.find(t.selector.conf_container)),e=i.find(u.fieldset.selector.wrap);i.data("config");a instanceof jQuery&&(a=a.val()),(t=c(".fp-template-"+a).filter('[data-rel="'+t.$.container.attr("id")+'"]').filter("[data-callable]").html())&&a!==i.data("type")&&(i.data("type",a),e.empty().append(t),this.configure(i)),a?(n.removeClass("fp-last-child"),i.show()):(n.addClass("fp-last-child"),i.hide())},configure:function(e){var d=this,p=e.data("config");e.find(u.fieldset.selector.field).each(function(){var e=c(this),t=e.parents(d.selector.item).eq(0),a=e.next(u.fieldset.selector.label),n=e.next(u.fieldset.selector.internal_label),i=e.data("name"),r=parseInt(t.find(u.fieldset.selector.order).val(),10)-1,s=i[r],o=e.data("name"),t=e.data("id"),l=[],i=[];0===a.length&&(a=e.parents(u.fieldset.selector.field_container).eq(0).find(u.fieldset.selector.label)),f.each(t,function(e,t,a){l.push(e),"meta"!==e&&"taxonomy"!==e||l.push(r)}),f.each(o,function(e,t,a){i.push(e),"meta"!==e&&"taxonomy"!==e||i.push(r)}),0!==l.length&&(e.attr("id",u.fieldId(l)),a.attr("for",u.fieldId(l)),n.attr("for",u.fieldId(l))),0!==i.length&&e.attr("name",u.fieldName(i)),void 0!==p&&void 0!==p[s]&&e.val(p[s])})},is_removeable:function(){if(1!==this.$.items.length)return!1;var e=this.$.items.eq(0);return!!f.isEmpty(e.find(this.selector.type).select2("val"))},setup:function(){var a=this;a.$.container.on("change",a.selector.type,[],function(e){var t=c(this);a.render(t),u.fieldset.update(a,!1)})},reset:function(e){}},{name:"taxonomy",$:{},selector:{container:".fp-type-taxonomy-container",item:".fp-table-taxonomy",taxonomies_container:".fp-taxonomies-container",taxonomies:".fp-taxonomies",terms_container:".fp-terms-container",terms:".fp-terms",weight_container:".fp-weight-container",weight:".fp-weight"},update:function(e){},is_removeable:function(){if(1!==this.$.items.length)return!1;var e=this.$.items.eq(0);return!(!f.isEmpty(e.find(this.selector.taxonomies).select2("val"))||!f.isEmpty(e.find(this.selector.terms).val()))},setup:function(){},reset:function(e){}}],selector:{wrap:".fp-field-wrap",duplicate:".fp-action-duplicate",remove:".fp-action-remove",order:".fp-action-order",label:".fp-field-label",internal_label:".fp-internal-label",field:".fp-field",field_container:".fp-field-container"},setup:function(a){var e=c("form").children(".form-table").children("tbody");a.$={},a.$.container=e.children(a.selector.container),a.$.wrap=a.$.container.children(u.fieldset.selector.wrap),a.$.container.on("click",this.selector.duplicate,[],function(e){var t=c(this).parents(a.selector.item).clone();t.find(".fp-type-date").removeClass("hasDatepicker").end().find(".fp-type-dropdown").removeClass("select2-offscreen").filter(".select2-container").remove(),u.fieldset.reset(a,t),a.$.wrap.append(t),u.fieldset.update(a)}),a.$.container.on("click",this.selector.remove,[],function(e){var t=c(this).parents(a.selector.item);1===a.$.items.length?u.fieldset.reset(a,a.$.items.eq(0)):t.remove(),u.fieldset.update(a)}),a.setup(),this.update(a,!1)},reset:function(e,t){t.find("tbody").find(u.fieldset.selector.field).each(function(){var e=c(this);e.val(""),e.hasClass("select2-offscreen")&&e.select2("val","")}),e.reset(t)},update:function(n){n.$.items=n.$.wrap.children(n.selector.item),n.is_removeable()?n.$.items.eq(0).find(u.fieldset.selector.remove).prop("disabled",!0).end().find(n.selector.name).prop("required",!1):n.$.items.find(u.fieldset.selector.remove).prop("disabled",!1).end().find(n.selector.name).prop("required",!0),n.$.items.each(function(o){var e=c(this),t=e.find(u.fieldset.selector.order),a=e.find(u.fieldset.selector.field);t.val(o+1),a.filter("input, textarea, select").each(function(){var e=c(this),t=e.next(u.fieldset.selector.label),a=e.next(u.fieldset.selector.internal_label),n=e.data("name"),i=e.data("id"),r=[],s=[];0===t.length&&(t=e.parents(u.fieldset.selector.field_container).eq(0).find(u.fieldset.selector.label)),f.each(i,function(e,t,a){r.push(e),"meta"!==e&&"taxonomy"!==e||r.push(o)}),f.each(n,function(e,t,a){s.push(e),"meta"!==e&&"taxonomy"!==e||s.push(o)}),0!==r.length&&(e.attr("id",u.fieldId(r)),t.attr("for",u.fieldId(r)),a.attr("for",u.fieldId(r))),0!==s.length&&e.attr("name",u.fieldName(s))}),n.update(e)}),c.each(u.fields,function(e,t){t(window.jQuery,window._)})}},c(document).ready(function(){c.each(u.fieldset.items,function(e,a){u.fieldset.setup(a),a.$.container.each(function(e,t){u.fieldset.update(a)})}),c.each(u.fields,function(e,t){t(window.jQuery,window._)})})}(window.jQuery,window._,window.fakerpress);