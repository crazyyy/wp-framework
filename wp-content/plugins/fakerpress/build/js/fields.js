!function(e,t){"use strict";var a=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},n={fields:{},ready_class:"fp-js-ready",plugin:"fakerpress",abbr:"fp",fieldName:function(e){return e=e.map((function(e){return new String(e)})),this.plugin+"["+e.join("][")+"]"},fieldId:function(e){return this.plugin+"-field-"+e.join("-")},searchId:function(e){var t=null;return void 0!==e.id?t=e.id:void 0!==e.ID?t=e.ID:void 0!==e.value&&(t=e.value),null==e?null:t}};n.fields.dates=function(e,t){e(".fp-type-date").not(".hasDatepicker").datepicker({after:["attr"],constrainInput:!1,dateFormat:"yy-mm-dd"}),e(".fp-type-interval-wrap").each((function(){var t=e(this),a=t.find(".fp-type-dropdown"),i=t.find('[data-type="min"]'),r=t.find('[data-type="max"]');t.hasClass(n.ready_class)||(t.addClass(n.ready_class),i.on({change:function(t){i.parents(".fp-field-wrap").find('[data-type="max"]').datepicker("option","minDate",e(this).val()).datepicker("refresh"),e(".fp-type-date.hasDatepicker").datepicker("refresh")}}),r.on({change:function(t){r.parents(".fp-field-wrap").find('[data-type="min"]').datepicker("option","maxDate",e(this).val()).datepicker("refresh"),e(".fp-type-date.hasDatepicker").datepicker("refresh")}}),a.on({change:function(e){var t=a.find(":selected"),n=t.attr("min"),s=t.attr("max");i.datepicker("setDate",n),r.datepicker("setDate",s)}}).trigger("change"))}))},n.fields.dropdown=function(e,t){var a=e(".fp-type-dropdown").not(".select2-offscreen, .select2-container"),i={wp_query_title:[]};i.wp_query_title.push("ID: &quot;<%= ID %>&quot;"),i.wp_query_title.push("Title: &quot;<%= post_title %>&quot;"),i.wp_query_title.push("Post Type: &quot;<%= post_type.labels.singular_name %>&quot;"),i.wp_query_title.push("Author: &quot;<%= post_author %>&quot;"),a.each((function(){var a=e(this),r={width:420};if(a.is("[multiple]")?(r.multiple=!0,a.is("[data-tags]")||(r.data=function(){return{results:a.data("options")}}),t.isArray(a.data("separator"))?r.tokenSeparators=a.data("separator"):r.tokenSeparators=[a.data("separator")],r.separator=a.data("separator"),r.regexSeparatorElements=["^("],r.regexSplitElements=["(?:"],e.each(r.tokenSeparators,(function(e,t){r.regexSeparatorElements.push("[^"+t+"]+"),r.regexSplitElements.push("["+t+"]")})),r.regexSeparatorElements.push(")$"),r.regexSplitElements.push(")"),r.regexSeparatorString=r.regexSeparatorElements.join(""),r.regexSplitString=r.regexSplitElements.join(""),r.regexToken=new RegExp(r.regexSeparatorString,"ig"),r.regexSplit=new RegExp(r.regexSplitString,"ig"),r.id=n.searchId):r.width=200,r.matcher=function(e,a){var i=0==a.toUpperCase().indexOf(e.toUpperCase());if(!i&&void 0!==r.tags){var s=t.where(r.tags,{text:a});r.tags.length>0&&t.isObject(s)&&(i=0==n.searchId(s[0]).toUpperCase().indexOf(e.toUpperCase()))}return i},a.is("[data-tags]")&&(r.tags=a.data("options"),r.initSelection=function(a,n){var i=[];e(a.val().split(r.regexSplit)).each((function(){var e={id:this,text:this};if(r.tags.length>0&&t.isObject(r.tags[0])){var a=t.where(r.tags,{value:this});a.length>0&&(e={id:(e=a[0]).value,text:e.text})}i.push(e)})),n(i)},r.createSearchChoice=function(e,t){if(e.match(r.regexToken))return{id:e,text:e}},0===r.tags.length&&(r.formatNoMatches=function(){return a.attr("placeholder")})),a.is("[data-source]")){var s=a.data("source"),o=a.data("nonce");r.data={results:[]},r.allowClear=!0,r.escapeMarkup=function(e){return e},r.ajax={dataType:"json",type:"POST",url:window.ajaxurl,results:function(t){return e.each(t.results,(function(e,t){t.id=t.ID})),t}},"WP_Query"===s?(r.formatSelection=function(e){return t.template('<abbr title="'+i.wp_query_title.join("&#13;&#10;")+'"><%= post_type.labels.singular_name %>: <%= ID %>')(e)},r.formatResult=function(e){return t.template('<abbr title="'+i.wp_query_title.join("&#13;&#10;")+'"><%= post_type.labels.singular_name %>: <%= ID %> <b>[</b> <em><%= post_title %></em> <b>]</b></abbr>')(e)},r.ajax.data=function(a,n){var i=t.intersection(e("#fakerpress-field-post_types").val().split(","),t.pluck(t.where(e("#fakerpress-field-post_types").data("options"),{hierarchical:!0}),"id"));return{action:"fakerpress.select2-"+s,nonce:o,query:{s:a,posts_per_page:10,paged:n,post_type:i}}}):(r.ajax.data=function(t,n){var i=a.parents(".fp-table-taxonomy").eq(0);return{action:"fakerpress.select2-"+s,search:t,nonce:o,page:n,page_limit:25,taxonomies:i.find(".fp-taxonomies").select2("val"),exclude:e(this).select2("val")}},r.formatSelection=function(e){return t.template("<%= taxonomy %>: <%= name %>")(e)},r.formatResult=function(e){return t.template("<%= taxonomy %>: <%= name %>")(e)})}a.select2(r)})).on("change",(function(a){var n=e(this),i=e(this).data("value");n.is("[multiple]")&&n.is("[data-source]")&&(a.added?t.isArray(i)?i.push(a.added):i=[a.added]:i=t.isArray(i)?t.without(i,a.removed):[],n.data("value",i).attr("data-value",JSON.stringify(i)))})).on("select2-open",(function(t){var a=e(t.target).data("select2"),n=a.dropdown.width();a.dropdown.width(n+2).css("margin-left","-1px")}))},n.fields.range=function(e,t){e(".fp-type-range-wrap").each((function(){var t=e(this),i=t.find('.fp-type-number[data-type="min"]'),r=t.find('.fp-type-number[data-type="max"]');t.hasClass(n.ready_class)||(t.addClass(n.ready_class),i.on({"change keyup":function(e){var t=parseInt(i.val(),10),n=parseInt(r.val(),10);a(t)?(r.prop("disabled",!1),n&&a(n)&&t>n&&i.val(n)):(r.prop("disabled",!0),i.val(""))}}).trigger("change"),r.on({"change keyup":function(e){var t=parseInt(i.val(),10),n=parseInt(r.val(),10);a(n)&&t>n&&i.val(n)}}).trigger("change"))}))},n.fieldset={items:[{name:"meta",$:{},selector:{container:".fp-type-meta-container",item:".fp-table-meta",type_container:".fp-meta_type-container",type:".fp-meta_type",name_container:".fp-meta_name-container",name:".fp-meta_name",conf_container:".fp-meta_conf-container"},update:function(e){this.render(e)},render:function(t){var a,i=this,r=t.find(i.selector.type).select2("val"),s=(t.find(i.selector.name).val(),t.find(i.selector.name_container)),o=(t.find(i.selector.type_container),t.find(i.selector.conf_container)),l=o.find(n.fieldset.selector.wrap);o.data("config"),r instanceof jQuery&&(r=r.val()),(a=e(".fp-template-"+r).filter('[data-rel="'+i.$.container.attr("id")+'"]').filter("[data-callable]").html())&&r!==o.data("type")&&(o.data("type",r),l.empty().append(a),this.configure(o)),r?(s.removeClass("fp-last-child"),o.show()):(s.addClass("fp-last-child"),o.hide())},configure:function(a){var i=this,r=a.data("config");a.find(n.fieldset.selector.field).each((function(){var a=e(this),s=a.parents(i.selector.item).eq(0),o=a.next(n.fieldset.selector.label),l=a.next(n.fieldset.selector.internal_label),d=a.data("name"),p=parseInt(s.find(n.fieldset.selector.order).val(),10)-1,c=d[p],f=a.data("name"),u=a.data("id"),h=[];d=[],0===o.length&&(o=a.parents(n.fieldset.selector.field_container).eq(0).find(n.fieldset.selector.label)),t.each(u,(function(e,t,a){h.push(e),"meta"!==e&&"taxonomy"!==e||h.push(p)})),t.each(f,(function(e,t,a){d.push(e),"meta"!==e&&"taxonomy"!==e||d.push(p)})),0!==h.length&&(a.attr("id",n.fieldId(h)),o.attr("for",n.fieldId(h)),l.attr("for",n.fieldId(h))),0!==d.length&&a.attr("name",n.fieldName(d)),void 0!==r&&void 0!==r[c]&&a.val(r[c])}))},is_removeable:function(){if(1===this.$.items.length){var e=this.$.items.eq(0);return!!t.isEmpty(e.find(this.selector.type).select2("val"))}return!1},setup:function(){var t=this;t.$.container.on("change",t.selector.type,[],(function(a){var i=e(this);t.render(i),n.fieldset.update(t,!1)}))},reset:function(e){}},{name:"taxonomy",$:{},selector:{container:".fp-type-taxonomy-container",item:".fp-table-taxonomy",taxonomies_container:".fp-taxonomies-container",taxonomies:".fp-taxonomies",terms_container:".fp-terms-container",terms:".fp-terms",weight_container:".fp-weight-container",weight:".fp-weight"},update:function(e){},is_removeable:function(){if(1===this.$.items.length){var e=this.$.items.eq(0);return!(!t.isEmpty(e.find(this.selector.taxonomies).select2("val"))||!t.isEmpty(e.find(this.selector.terms).val()))}return!1},setup:function(){},reset:function(e){}}],selector:{wrap:".fp-field-wrap",duplicate:".fp-action-duplicate",remove:".fp-action-remove",order:".fp-action-order",label:".fp-field-label",internal_label:".fp-internal-label",field:".fp-field",field_container:".fp-field-container"},setup:function(t){var a=e("form").children(".form-table").children("tbody");t.$={},t.$.container=a.children(t.selector.container),t.$.wrap=t.$.container.children(n.fieldset.selector.wrap),t.$.container.on("click",this.selector.duplicate,[],(function(a){var i=e(this).parents(t.selector.item).clone();i.find(".fp-type-date").removeClass("hasDatepicker").end().find(".fp-type-dropdown").removeClass("select2-offscreen").filter(".select2-container").remove(),n.fieldset.reset(t,i),t.$.wrap.append(i),n.fieldset.update(t)})),t.$.container.on("click",this.selector.remove,[],(function(a){var i=e(this).parents(t.selector.item);1===t.$.items.length?n.fieldset.reset(t,t.$.items.eq(0)):i.remove(),n.fieldset.update(t)})),t.setup(),this.update(t,!1)},reset:function(t,a){a.find("tbody").find(n.fieldset.selector.field).each((function(){var t=e(this);t.val(""),t.hasClass("select2-offscreen")&&t.select2("val","")})),t.reset(a)},update:function(a){a.$.items=a.$.wrap.children(a.selector.item),a.is_removeable()?a.$.items.eq(0).find(n.fieldset.selector.remove).prop("disabled",!0).end().find(a.selector.name).prop("required",!1):a.$.items.find(n.fieldset.selector.remove).prop("disabled",!1).end().find(a.selector.name).prop("required",!0),a.$.items.each((function(i){var r=e(this),s=r.find(n.fieldset.selector.order),o=r.find(n.fieldset.selector.field);s.val(i+1),o.filter("input, textarea, select").each((function(){var a=e(this),r=a.next(n.fieldset.selector.label),s=a.next(n.fieldset.selector.internal_label),o=a.data("name"),l=a.data("id"),d=[],p=[];0===r.length&&(r=a.parents(n.fieldset.selector.field_container).eq(0).find(n.fieldset.selector.label)),t.each(l,(function(e,t,a){d.push(e),"meta"!==e&&"taxonomy"!==e||d.push(i)})),t.each(o,(function(e,t,a){p.push(e),"meta"!==e&&"taxonomy"!==e||p.push(i)})),0!==d.length&&(a.attr("id",n.fieldId(d)),r.attr("for",n.fieldId(d)),s.attr("for",n.fieldId(d))),0!==p.length&&a.attr("name",n.fieldName(p))})),a.update(r)})),e.each(n.fields,(function(e,t){t(window.jQuery,window._)}))}},e((function(){e.each(n.fieldset.items,(function(e,t){n.fieldset.setup(t),t.$.container.each((function(e,a){n.fieldset.update(t)}))})),e.each(n.fields,(function(e,t){t(window.jQuery,window._)}))}))}(window.jQuery,window._),window.fakerpress=window.fakerpress||{},window.fakerpress.fields={};