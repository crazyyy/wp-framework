!function(){const{i18n:t,a11y:e,apiFetch:a}=wp,{__}=t,n=[];let i=!1;function s(t){t.preventDefault();const e=t.target;if(e.classList.contains("updating-message")||e.classList.contains("disabled"))return;e.classList.add("updating-message"),e.textContent=__("Waiting…","performance-lab");const a=e.dataset.pluginSlug;n.push({target:e,pluginSlug:a}),i||c()}async function c(){if(0===n.length)return void(i=!1);i=!0;const{target:t,pluginSlug:s}=n.shift();t.textContent=__("Activating…","performance-lab"),e.speak(__("Activating…","performance-lab"));try{await a({path:`/performance-lab/v1/features/${s}:activate`,method:"POST"});const n=await a({path:`/performance-lab/v1/features/${s}`,method:"GET"});if(n.settingsUrl){const t=document.querySelector(`.plugin-card-${s} .plugin-action-buttons`),e=document.createElement("li"),a=document.createElement("a");a.href=n.settingsUrl,a.textContent=__("Settings","performance-lab"),e.appendChild(a),t.appendChild(e)}e.speak(__("Plugin activated.","performance-lab")),t.textContent=__("Active","performance-lab"),t.classList.remove("updating-message"),t.classList.add("disabled")}catch(a){e.speak(__("Plugin failed to activate.","performance-lab")),t.classList.remove("updating-message"),t.textContent=__("Activate","performance-lab")}finally{c()}}document.querySelectorAll(".perflab-install-active-plugin").forEach((t=>{t.addEventListener("click",s)}))}();